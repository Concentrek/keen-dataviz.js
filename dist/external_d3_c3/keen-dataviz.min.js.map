{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/copy-to-clipboard.js","webpack:///external \"d3\"","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/utils/escape-html.js","webpack:///./lib/utils/extend.js","webpack:///./lib/utils/svg-text-wrap.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///external \"c3\"","webpack:///./lib/utils/assert-date-string.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/dataset/index.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/utils/strip-html-tags.js","webpack:///./lib/utils/extend-deep.js","webpack:///./lib/utils/render-download-btn.js","webpack:///./lib/utils/export-svg.js","webpack:///./lib/utils/export-data.js","webpack:///./lib/browser.js","webpack:///./lib/index.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/object.js","webpack:///./lib/data.js","webpack:///./lib/libraries/index.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/dataset/utils/calculate-range.js","webpack:///./lib/dataset/utils/calculate-percents.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/utils/download-results.js","webpack:///./node_modules/dom-to-image/src/dom-to-image.js","webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./lib/libraries/default/metric.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/default/funnel.js","webpack:///./lib/libraries/default/funnel-3d.js","webpack:///./lib/libraries/default/horizontal-funnel.js","webpack:///./lib/libraries/default/horizontal-funnel-3d.js","webpack:///./lib/libraries/default/metric-combo.js","webpack:///./lib/utils/render-execution-metadata.js","webpack:///./lib/palettes/index.js","webpack:///./lib/palettes/autocollector.js","webpack:///./lib/palettes/modern.js","webpack:///./lib/palettes/dracula.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__9__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","each","cb","Array","length","event","placeholder","document","createElement","body","appendChild","select","execCommand","removeChild","notification","style","padding","backgroundColor","fontSize","position","top","pageY","left","pageX","zIndex","opacity","transition","innerText","addEventListener","e","tooltip","stickTooltip","setTimeout","prettyNumber","input","sciNo","Number","toPrecision","prefix","suffixes","String","Math","abs","recurse","iteration","split","rhs","charAt","numNumerals","escapeHtml","string","escape","str","match","matchHtmlRegExp","exec","html","index","lastIndex","charCodeAt","substring","extend","target","arguments","prop","textWrap","text","width","d3","this","words","reverse","word","line","lineNumber","x","attr","y","tspan","append","dy","pop","push","join","node","getComputedTextLength","appendColumn","appendRow","_createNullList","_each","self","label","slice","undefined","matrix","row","cell","concat","_createNullList2","default","newRow","col","selectColumn","len","list","testObject","getTime","isNaN","testString","test","_typeof","g","Function","del","filter","insert","sort","update","_extend","Dataset","config","meta","type","data","arr","set","coords","Error","colIndex","indexOf","rowIndex","colResult","rowResult","selectRow","analyses","parser","_parsers2","average","start","end","sum","val","parseFloat","maximum","nums","max","apply","minimum","min","getColumnAverage","getRowAverage","getColumnSum","getRowSum","getColumnMaximum","getRowMaximum","getColumnMinimum","getRowMinimum","getColumnLabel","getRowIndex","stripHtmlTags","inputString","replace","extendDeep","_ref","element","_ref$label","_ref$type","_toConsumableArray","parentNode","children","find","child","className","button","_downloadResults2","insertBefore","nextSibling","_downloadResults","obj","quality","bgcolor","domtoimage","toBlob","then","blob","_fileSaver","saveAs","_domToImage","format","toLowerCase","includes","fileFormat","content","encodeURIComponent","JSON","stringify","csvContent","forEach","j","generateCsvContent","htmlElement","setAttribute","fileName","click","_index","Dataviz","global","extendKeenGlobalObject","env","KeenDataviz","KeenDataset","Keen","keenGlobals","webpackKeenGlobals","_dataset","_stripHtmlTags","_extendDeep","_this","options","c3","defaultOptions","showDeprecationWarnings","showLoadingSpinner","container","containerElement","title","showTitle","notes","theme","colors","colorMapping","ui","executionMetadata","utils","clickToCopyToClipboard","indexBy","labels","labelMapping","labelMappingRegExp","errorMapping","showErrorMessages","library","sortGroups","sortIntervals","results","stacked","dateFormat","legend","show","textMaxLength","pagination","offset","limit","pointer","axis","color","size","point","focus","expand","enabled","sensitivity","horizontal","order","selection","draggable","multiple","onselected","view","_artifacts","selected","reduce","prev","curr","_copyToClipboard2","grid","partialIntervalIndicator","timezone","table","schema","renderOnVisible","funnel","lines","resultValues","percents","countingMethod","decimals","marginBetweenElements","hover","effect3d","minimalSize","react","range","sparkline","_extends","palette","palettes","console","log","convertChartTypes","stacking","el","pattern","dataset","_prepared","_rendered","visuals","prepare","render","firstVisibilityState","visibilityState","callback","setLabels","datavizInstance","_assertDateString2","updateRow","updateColumn","mapLabelsExec","valueAfterMatching","regExpAndLabel","mapLabels","labelMappingDimension","sortColumns","sortRows","areachart","barchart","columnchart","linechart","piechart","domReady","fn","readyState","DOMContentLoaded","removeEventListener","testDom","libraries","_libraries2","register","actions","method","nodeName","querySelector","visual","attributes","chartOptions","destroy","innerHTML","height","num","message","loader","spinner","_this2","firstResult","query","interval","timeframe","isArray","timeframes","map","resultItem","resultTimeframe","timeframeItem","msg","error","getLabel","event_collection","analysis_type","deleteColumn","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","result","ds2","err","return","keys","returnValue","renderAsPromise","Promise","resolve","reject","customCallback","onrendered","shouldRenderExecutionMetadata","execution_metadata","shouldRenderDownloadBtn","buttons","download","mappedMsg","chart100percentWide","rangeChart","align","buildDomWrapper","_renderDownloadBtn2","_renderExecutionMetadata2","IntersectionObserver","events","observer","isIntersecting","observe","hidden","visibilityChange","msHidden","webkitHidden","load","once","bool","exportImage","_ref2","_ref2$quality","_ref2$bgcolor","_exportSvg2","exportData","_exportData2","chartType","parseRawData","parseRequest","initialize","version","pkg","q","splice","deleteRow","filterColumns","clone","selectedColumn","ri","filterRows","insertColumn","insertRow","_append","comp","head","cols","analysesUtilMethods","b","op","_analyses","lib","parsers","_flatten","_object","metric","res","record","grouped-metric","grouped-interval","group","double-grouped-metric","rowLabel","double-grouped-interval","steps","extraction","datasetExtraction","names","flatten","tableConfig","resultKeys","keyName","columns","iNames","valueAtDeepKey","ob","toReturn","flatObject","is","response","selectedParser","parserArgs","metadata","filters","group_by","display_name","analysis","toUpperCase","getDefaultTitle","visualization","chart_type","getDefaultType","Date","timer","onresize","resize","attachEvent","bindResizeListener","clearTimeout","delay","chart","c3Chart","prevSiblingWidth","previousSibling","offsetWidth","nextSiblingWidth","types","Funnel","funnel-3d","Funnel3d","horizontal-funnel","HorizontalFunnel","horizontal-funnel-3d","HorizontalFunnel3d","metric-combo","MetricCombo","getPaddings","paddingName","parseInt","getComputedStyle","ENFORCED_OPTIONS","bindto","renderingElement","offsetHeight","titleElement","notesElement","DEFAULT_OPTIONS","sumArray","_calculatePercents","calculateSumForPercents","calculatePercents","tick","_calculateRange2","clearOnRender","_datasetMeta$type","spliceFrom","removeLegend","rotated","_defaultDateFormat2","culling","groups","categories","legendElement","remove","partialResultsRegion","class","regions","contents","c3TooltipContents","ratio","id","valueFormatted","scope","toFixed","c3options","hide","generate","c3PaginatingLegend","onLegendRendered","onPaginated","flush","defineC3","startDate","endDate","timeDiff","months","ms","date","getMonth","getFullYear","getDate","domNode","legendConfig","round","total","dataColumnsSorted","column","columnData","item","paginateHorizontalLeftElement","legendItemsElement","paginateVerticalElement","paginateHorizontalRightElement","paginateData","labelShortened","legendItem","chartPartId","legendItemColorSample","prepend","tooltipElement","revert","isHidden","toggle","arrowUp","arrowDown","paginate","direction","diff","floor","clearSelectedText","empty","getSelection","removeAllRanges","_assertDateString","defaultTitleFormat","defaultValueFormat","nameFormat","tooltip_format_name","titleFormat","tooltip_format_title","valueFormat","tooltip_format_value","CLASS","_escapeHtml","levelColor","tooltipName","outer","inner","titleContainer","notesContainer","preventDefault","currentTarget","previousElementSibling","util","parseExtension","mimeType","url","extension","WOFF","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","isDataUrl","search","canvasToBlob","canvas","binaryString","atob","toDataURL","binaryArray","Uint8Array","Blob","resolveUrl","baseUrl","doc","implementation","createHTMLDocument","base","href","getAndEncode","TIMEOUT","impl","cacheBust","request","XMLHttpRequest","onreadystatechange","status","fail","encoder","FileReader","onloadend","readAsDataURL","ontimeout","responseType","timeout","open","send","imagePlaceholder","uid","random","pow","toString","arg","asArray","arrayLike","array","escapeXhtml","makeImage","uri","image","Image","onload","onerror","src","leftBorder","px","rightBorder","scrollWidth","topBorder","bottomBorder","scrollHeight","styleProperty","getPropertyValue","newUtil","inliner","URL_REGEX","inlineAll","shouldProcess","readUrls","urls","inline","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","webFont","cssStrings","styleSheets","cssRules","sheet","rule","CSSRule","FONT_FACE_RULE","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","newImages","toSvg","toPng","draw","toJpeg","toPixelData","getContext","getImageData","copyOptions","HTMLCanvasElement","cloneNode","original","parent","childClone","cloneChildrenInOrder","cloneChildren","source","copyProperties","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","HTMLInputElement","SVGElement","SVGRectElement","attribute","getAttribute","processClone","embedFonts","inlineImages","XMLSerializer","serializeToString","xhtml","foreignObject","makeSvgDataUri","ctx","fillStyle","fillRect","newCanvas","drawImage","makeNodeCopy","copyStyle","cloneStyle","clonePseudoElements","formatProperty","copyUserInput","fixSvg","styleNode","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f","HTMLAnchorElement","h","URL","webkitURL","rel","origin","location","createObjectURL","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","HTMLElement","safari","userAgent","k","_prettyNumber","_copyToClipboard","opts","suffix","formattedNum","flexDifferenceStyle","resultDifference","differenceStyle","smallerValue","_config","previousResults","resultClassName","previousResultsClassName","currentPage","_generateTableRows","customConfig","page","arrows","datasetPaginated","pages","ceil","columnsArray","colNamesToMap","_datavizInstance$conf","mapValues","mapDates","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","entries","_slicedToArray","rowColValue","rowColValueEscaped","pageNumber","prevPage","nextPage","fieldNumber","columnNames","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","colName","colNameEscaped","_generateTableHeader","querySelectorAll","sortOrder","first","shift","sortOrderNumber","nameA","nameB","unshift","attachBtnEventListeners","btn","tableClass","_e$target","clearInterval","radius","_svgTextWrap","_config$funnel","_config$funnel$percen","marginBetweenSteps","margin","yMarginElement","funnelContainer","svgWidth","svgHeight","elemHeight","prevElemWidth","percent","minimalSizeStep","polygons","newPoints","points","selectAll","enter","handleMouseOver","polygonsHover","labelHover","thisLabel","handleMouseOut","on","shadowCut","polygonsShadows","polygons3d","rgb","darker","xMarginElement","elemWidth","prevElemHeight","metricResults","prevResult","previous","count","current","percentDifference","labelClass","iconClass","containerTitle","chartRoot","right","bottom","currentCount","dataList","classList","dt","handleCopyToClipboard","dd","removeClassWithTimeOut","contains","add","autocollector","modern","dracula"],"mappings":"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","file":"keen-dataviz.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","function stickTooltip(event, tooltip) {\n  tooltip.style.opacity = 0;\n  tooltip.style.top = `${event.pageY}px`;\n  tooltip.style.left = `${event.pageX + 10}px`;\n}\n\nexport default function copyToClipboard(value, event) {\n  const placeholder = document.createElement('input');\n  placeholder.value = value;\n  document.body.appendChild(placeholder);\n  placeholder.select();\n  document.execCommand('copy');\n  document.body.removeChild(placeholder);\n\n  if (event) {\n    const notification = document.createElement('div');\n    notification.style.padding = '5px 10px';\n    notification.style.backgroundColor = '#ffffff';\n    notification.style.fontSize = '12px';\n    notification.style.position = 'absolute';\n    notification.style.top = `${event.pageY}px`;\n    notification.style.left = `${event.pageX + 10}px`;\n    notification.style.zIndex = '999';\n    notification.style.opacity = 1;\n    notification.style.transition = 'opacity 1s ease';\n    notification.innerText = 'copied!';\n\n    document.body.appendChild(notification);\n    document.addEventListener('mousemove', e => stickTooltip(e, notification));\n\n    setTimeout(() => {\n      notification.style.opacity = 1;\n      document.body.removeChild(notification);\n    }, 1000);\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","import * as d3 from 'd3';\n\nexport function textWrap(text, width) {\n  text.each(function () {\n    let text = d3.select(this),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        x = text.attr(\"x\"),\n        y = text.attr(\"y\"),\n        dy = 0, //parseFloat(text.attr(\"dy\")),\n        tspan = text.text(null)\n                    .append(\"tspan\")\n                    .attr(\"x\", x)\n                    .attr(\"y\", y)\n                    .attr(\"dy\", dy + \"em\");\n    while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n        if (tspan.node().getComputedTextLength() > width) {\n            line.pop();\n            tspan.text(line.join(\" \"));\n            line = [word];\n            tspan = text.append(\"tspan\")\n                        .attr(\"x\", x)\n                        .attr(\"y\", y)\n                        .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\n                        .text(word);\n        }\n    }\n  });\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function (config = {}) {\n  if (this instanceof Dataset === false) {\n    return new Dataset(config);\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n  this.config = config;\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\nconst getColumnAverage = function (arr) {\n  return average(arr, 1);\n};\nconst getRowAverage = getColumnAverage;\n\nconst getColumnSum = function (arr) {\n  return sum(arr, 1);\n};\nconst getRowSum = getColumnSum;\n\nconst getColumnMaximum = function (arr) {\n  return maximum(arr, 1);\n};\nconst getRowMaximum = getColumnMaximum;\n\nconst getColumnMinimum = function (arr) {\n  return minimum(arr, 1);\n};\nconst getRowMinimum = getColumnMinimum;\n\nconst getColumnLabel = function (arr) {\n  return arr[0];\n};\nconst getRowIndex = getColumnLabel;\n\nexport default {\n  average,\n  maximum,\n  minimum,\n  sum,\n  getColumnAverage,\n  getRowAverage,\n  getColumnSum,\n  getRowSum,\n  getColumnMaximum,\n  getRowMaximum,\n  getColumnMinimum,\n  getRowMinimum,\n  getColumnLabel,\n  getRowIndex,\n};\n","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  if (typeof inputString !== 'string') {\n    return inputString;\n  }\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","import downloadResults from './download-results';\n\nexport default function renderDownloadButton({\n  element,\n  label = 'Download',\n  type = 'json',\n  data,\n} = {}) {\n  const btnClass = 'keen-dataviz-button';\n  const isBtnRendered = [...element.parentNode.children]\n    .find(child => child.className === btnClass);\n  if (isBtnRendered) return;\n\n  const button = document.createElement('button');\n  button.innerText = label;\n  button.className = btnClass;\n  button.addEventListener('click', event => downloadResults({ event, type, data}));\n  element.parentNode.insertBefore(button, element.nextSibling);\n};","import domtoimage from 'dom-to-image';\nimport { saveAs } from 'file-saver';\n\nexport default function exportImage(obj) {\n  const { node, quality, bgcolor } = obj;\n  if (quality) {\n    if (quality < 0 || quality > 1) throw Error('Please provide image quality between 0 and 1');\n    domtoimage.toBlob(node, { quality, bgcolor })\n      .then((blob) => {\n        saveAs(blob, 'chart.jpeg');\n      });\n  }\n\n  if (!quality) {\n    domtoimage.toBlob(node)\n      .then((blob) => {\n        saveAs(blob, 'chart.png');\n      });\n  }\n}\n","function generateCsvContent(data) {\n  let csvContent = 'data:text/csv;charset=utf-8,';\n\n  data.forEach((row, i) => {\n    row.forEach((cell, j) => {\n      csvContent += String(cell).replace(/,/g, '');\n      if (row.length > j + 1) {\n        csvContent += ',';\n      }\n    });\n    if (data.length > i + 1) {\n      csvContent += '\\n';\n    }\n  });\n\n  return csvContent;\n}\n\nexport default function exportData(obj) {\n  const { type, data } = obj;\n  const supportedFormats = ['json', 'csv'];\n  const format = type.toLowerCase();\n  if (!supportedFormats.includes(type)) {\n    throw new Error('This type is not supported');\n  }\n\n  const fileName = 'chart';\n  let fileFormat = '';\n  let content = '';\n\n  if (format === 'json') {\n    content = `data:text/json;charset=utf-8, ${encodeURIComponent(JSON.stringify(data))}`;\n    fileFormat = format;\n  }\n\n  if (format === 'csv') {\n    content = generateCsvContent(data);\n  }\n\n  const htmlElement = document.createElement('a');\n  htmlElement.setAttribute('href', content);\n  htmlElement.setAttribute('download', `${fileName}.${fileFormat}`);\n  document.body.appendChild(htmlElement);\n  htmlElement.click();\n  document.body.removeChild(htmlElement);\n}\n","import { Dataviz, Dataset } from './index';\n\nconst env = typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {};\n\nexport const extendKeenGlobalObject = function(env) {\n  env.KeenDataviz = Dataviz;\n  env.KeenDataset = Dataset;\n\n  // just for backward compatibility\n  env.Keen = env.Keen || {};\n  env.Keen.Dataset = Dataset;\n  env.Keen.Dataviz = Dataviz;\n};\n\nif (typeof KEEN_GLOBAL_OBJECT !== 'undefined'\n  && KEEN_GLOBAL_OBJECT) {\n  extendKeenGlobalObject(env);\n}\n\nexport let keenGlobals = undefined;\nif (typeof webpackKeenGlobals !== 'undefined') {\n  keenGlobals = webpackKeenGlobals;\n}\n\nexport { Dataviz, Dataset } from './index';\nexport default Dataviz;\n","/* eslint-env browser */\nimport * as d3 from 'd3';\nimport c3 from 'c3';\n\nimport pkg from '../package.json';\nimport data from './data';\nimport { Dataset } from './dataset';\n\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\nimport { extendDeep } from './utils/extend-deep';\nimport exportImage from './utils/export-svg';\nimport exportData from './utils/export-data';\nimport renderDownloadButton from './utils/render-download-btn';\nimport renderExecutionMetadata from './utils/render-execution-metadata';\nimport copyToClipboard from './utils/copy-to-clipboard';\n\nimport palettes from './palettes/index';\n\n// Constructor\nexport const Dataviz = function (options = {}) {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz(options);\n  }\n\n  this.c3 = c3; // expose for use outside\n  this.d3 = d3;\n\n  const datavizInstance = this;\n  const defaultOptions = {\n    showDeprecationWarnings: true,\n    showLoadingSpinner: false,\n\n    container: undefined, // querySelector of container, for example '#someDiv'\n    containerElement: undefined, // HTML parent element for the chart\n\n    // width: undefined, *deprecated* - use CSS\n    // height: undefined, *deprecated* - use CSS\n\n    title: undefined,\n    showTitle: true,\n\n    notes: undefined,\n    theme: 'keen-dataviz',\n\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n\n    colorMapping: {},\n    ui: {\n      executionMetadata: true,\n    },\n    utils: {\n      clickToCopyToClipboard: true, \n    },\n\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    labelMappingRegExp: undefined,\n    errorMapping: {},\n    showErrorMessages: true,\n    library: 'default',\n    sortGroups: undefined,\n    sortIntervals: undefined,\n\n    results: undefined, // raw data\n\n    // C3 chartOptions\n    type: undefined,\n    stacked: false,\n    dateFormat: undefined,\n    legend: {\n      show: true,\n      position: 'right',\n      label: {\n        textMaxLength: 12\n      },\n      pagination: {\n        offset: 0, // start from\n        limit: 5 // items per page\n      },\n      tooltip: {\n        show: true,\n        pointer: true\n      },\n      sort: undefined\n    },\n\n    axis: {},\n    color: {},\n    size: {\n      // control it with CSS of .c3-chart\n    },\n    padding: {\n      top: 15\n    },\n    point: {\n      focus: {\n        expand: {\n          enabled: false\n        }\n      },\n      r: 2,\n      show: true,\n      sensitivity: 300\n    },\n    tooltip: {\n      horizontal: true,\n      format: {\n        // https://c3js.org/samples/tooltip_format.html\n      }\n    },\n    transition: {\n      // duration: 0\n    },\n    data: {\n      order: null,\n      selection: {\n       enabled: true,\n       draggable: true,\n       multiple: true\n     },\n     onselected: (d, element) => {\n      const selectedItems = this.view._artifacts.c3.selected();\n      const sum = selectedItems.reduce((prev, curr) => prev + curr.value, 0);\n      copyToClipboard(sum);\n     },\n   },\n   grid: {\n     y: {\n       show: true\n     }\n   },\n   partialIntervalIndicator: {\n     show: undefined,\n     className: 'partial-interval-indicator'\n   },\n   timezone: 'UTC',\n   table: {\n     schema: 'static',\n   },\n   renderOnVisible: false,\n   funnel: {\n     lines: true,\n     resultValues: true,\n     percents: {\n       show: false,\n       countingMethod: 'absolute',\n       decimals: 0\n     },\n     marginBetweenElements: false,\n     hover: true,\n     effect3d: 'both-sides',\n     minimalSize: false,\n   },\n   react: false,\n   range: false,\n   sparkline: false,\n  };\n\n  this.config = { ...extendDeep(defaultOptions, options) };\n\n  if (options.palette) {\n    if (!palettes[options.palette]){\n      console.log('Colors pallete not found', options.palette);\n    }\n    this.config.colors = palettes[options.palette].colors;\n  }\n\n  if (this.config.type) {\n    // backward compatibility with v2016... areachart -> area\n    this.config.type = convertChartTypes(this.config.type);\n  }\n\n  // overwriting options for range chart\n  if(this.config.type && this.config.type.includes('-range')) {\n    this.config.range = true;\n    this.config.type = this.config.type.replace('-range', '');\n    this.config.legend.show = false;\n    this.config.stacking = 'normal';\n    this.config.labels = ['Max', 'Min'];\n    this.config.colors = [\n      this.config.colors[0],\n      this.config.colors[0],\n    ];\n  }\n\n  // overwriting stacked when stacking added\n  if (this.config.stacking) {\n    this.config.stacked = true;\n  }\n\n  // overwriting options for sparkline chart\n  if (this.config.sparkline) {\n    this.config.legend.show = false;\n    this.config.axis = {\n      x: {\n        show: false,\n      },\n      y: {\n        show: false,\n      },\n    };\n    this.config.grid = {\n      x: {\n        show: false,\n      },\n      y: {\n        show: false,\n      },\n    };\n  }\n\n  // get DOM node by query\n  if (this.config.container) {\n    this.el(this.config.container);\n  }\n\n  if (options.legend !== undefined && !options.legend) {\n    this.config.legend = {\n      ...options,\n      show: false\n    };\n  }\n\n  if (options.color && options.color.pattern) {\n    // to match c3 options\n    this.config.colors = options.color.pattern;\n  }\n\n  if (this.config.legend\n      && this.config.legend.tooltip\n      && this.config.legend.tooltip.show === false\n      && this.config.tooltip.show === undefined) {\n    this.config.tooltip = { show: false };\n  }\n\n  this.dataset = new Dataset(this.config);\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ }\n  };\n\n  Dataviz.visuals.push(this);\n\n  if (this.config.showLoadingSpinner) {\n    this.prepare();\n  }\n\n  if (!!this.config.results) {\n    this.render(this.config.results);\n  }\n  this.config.firstVisibilityState = document.visibilityState;\n\n  if (!this.config.utils.clickToCopyToClipboard) {\n    this.config.data.onselected = () => {};\n  }\n\n  if (options.data && options.data.onselected) {\n    this.config.data.onselected = (d, element) => {\n      const callback = options.data.onselected.bind(null, d, element);\n      callback();\n\n      if (this.config.utils.clickToCopyToClipboard) {\n        const selectedItems = this.view._artifacts.c3.selected();\n        const sum = selectedItems.reduce((prev, curr) => prev + curr.value, 0);\n        copyToClipboard(sum);\n      }\n    };\n  }\n\n};\n  \n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n  if (!arguments.length) return Dataviz.visuals;\n  const el = target.nodeName ? target : document.querySelector(target);\n  let match = null;\n  each(Dataviz.visuals, function(visual){\n    if (el == visual.config.container){\n      match = visual;\n      return false;\n    }\n  });\n  return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  const view = this.config;\n  each(obj, function(prop, key){\n    // Handle deprecated property names\n    if (key === 'chartType') {\n      key = 'type';\n    }\n    view[key] = prop;\n  });\n  return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  this.config = extendDeep(this.config, obj);\n  return this;\n};\n\nDataviz.prototype.colors = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.colors;\n  this.config.colors = (arr instanceof Array ? arr : []);\n  return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })');\n  }\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.colorMapping;\n  if (obj === null) {\n    this.config.colorMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      datavizInstance.config.colorMapping[key] = (value ? value : null);\n    });\n  }\n  return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.dateFormat;\n  if (typeof val === 'string' || typeof val === 'function') {\n    this.config.dateFormat = val;\n  }\n  else {\n    this.config.dateFormat = undefined;\n  }\n  return this;\n};\n\nDataviz.prototype.destroy = function(){\n  const library = this.library();\n  const type = this.config.type;\n  const element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n  if (element) {\n    element.innerHTML = '';\n  }\n  this.view._prepared = false;\n  this.view._rendered = false;\n  this.view._artifacts = {};\n  return this;\n};\n\nDataviz.prototype.el = function(target){\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.containerElement;\n  domReady(function(){\n    if (target && target !== null) {\n      if (target.nodeName) {\n        datavizInstance.config.containerElement = target;\n      }\n      else if (document.querySelector) {\n        datavizInstance.config.containerElement = document.querySelector(target);\n      }\n    }\n    else {\n      datavizInstance.config.containerElement = undefined;\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.height = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.height() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.indexBy;\n  this.config.indexBy = (str ? String(str) : 'timeframe.start');\n  return this;\n};\n\nDataviz.prototype.labels = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })');\n  }\n\n  if (!arguments.length) return this.config.labels;\n  this.config.labels = (arr instanceof Array ? arr : []);\n\n  setLabels(this);\n\n  return this;\n};\n\nfunction setLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value, index){\n      if (datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value, index){\n      if (index > 0 && datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.labelMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.labelMapping;\n  if (obj === null) {\n    this.config.labelMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config.labelMapping[key] = (value ? value : null);\n    }.bind(this));\n  }\n\n  mapLabels(this);\n\n  return this;\n};\n\nfunction mapLabelsExec({ datavizInstance, value }){\n  if (datavizInstance.config.labelMappingRegExp){\n    let valueAfterMatching = value;\n    datavizInstance.config.labelMappingRegExp.forEach(regExpAndLabel => {\n      if (regExpAndLabel.length > 1) {\n        let regExpObj = regExpAndLabel[0];\n        if (regExpObj.test(value)){\n          valueAfterMatching = regExpAndLabel[1];\n        }\n      }\n    });\n    return stripHtmlTags(valueAfterMatching);\n  }\n  if (datavizInstance.config.labelMapping[value]) {\n    return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n  }\n  return stripHtmlTags(value);\n}\n\nfunction mapLabels(datavizInstance){\n  // Write labels\n  if (!datavizInstance.config.labelMappingDimension) {\n    // if not defined use deprecated auto-detecting\n    if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.config.labelMappingDimension = 'row';\n    } else {\n      datavizInstance.config.labelMappingDimension = 'column';\n    }\n  }\n\n  if (datavizInstance.config.labelMappingDimension === 'row'\n    || datavizInstance.config.labelMappingDimension === 'both') {\n    datavizInstance.dataset.updateColumn(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n\n  if (datavizInstance.config.labelMappingDimension === 'column'\n    || datavizInstance.config.labelMappingDimension === 'both') {\n    datavizInstance.dataset.updateRow(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.config['library'];\n    this.config['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      const message = Dataviz.libraries.default.message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.notes;\n  this.config.notes = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.prepare = function(){\n    const datavizInstance = this;\n\n    if (!this.el()) {\n      throw `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n      return;\n    }\n\n    domReady(function(){\n      if (datavizInstance.view._rendered) {\n        datavizInstance.destroy();\n      }\n      if (datavizInstance.el()) {\n        datavizInstance.el().innerHTML = '';\n        const loader = Dataviz.libraries.default.spinner;\n        if (loader.render) {\n          loader.render.call(datavizInstance);\n        }\n        datavizInstance.view._prepared = true;\n      }\n    });\n\n    return this;\n};\n\nDataviz.prototype.render = function(results = undefined){\n  const datavizInstance = this;\n\n  if (!!results) {\n    const firstResult = results[0] || results;\n    if (\n      firstResult.query\n      && firstResult.query.interval\n      && firstResult.query.timeframe\n      && typeof firstResult.query.timeframe === 'string'\n      && firstResult.query.timeframe.includes('this_')\n      && this.config.partialIntervalIndicator\n      && this.config.partialIntervalIndicator.show === undefined\n    )\n    {\n      this.config.partialIntervalIndicator.show = true;\n    }\n\n    if (Array.isArray(results)) {\n      const timeframes = results.map(resultItem => resultItem.query.timeframe);\n      timeframes.forEach(resultTimeframe => {\n        let foundDifferent = timeframes.find(timeframeItem =>\n          JSON.stringify(timeframeItem) !== JSON.stringify(resultTimeframe)\n        );\n        if (foundDifferent){\n          const msg = 'Timeframes of the queries should be the same';\n          console.error(msg);\n          throw msg;\n        }\n      });\n      // first result is important to prepare X on the chart\n      return datavizInstance\n        .data(results[0])\n        .call(() => {\n          const getLabel = (input) => {\n            return `${input.query.event_collection} ${input.query.analysis_type}`;\n          }\n          let label = getLabel(results[0]);\n          if (datavizInstance.config.labelMapping[label]) {\n            label = datavizInstance.config.labelMapping[label];\n          }\n          this.dataset.deleteColumn(1);\n          for (let result of results) {\n            label = getLabel(result);\n            let ds2 = Dataset.parser('interval')(result);\n            datavizInstance.dataset.appendColumn(label, ds2.selectColumn(1).slice(1));\n          }\n        })\n        .render();\n    }\n\n    return datavizInstance.data(results).render();\n  }\n  if (\n    (!!this.config.labelMapping && Object.keys(this.config.labelMapping).length > 0)\n    ||\n    (!!this.config.labelMappingRegExp && this.config.labelMappingRegExp.length > 0)\n  ){\n    mapLabels(datavizInstance);\n  }\n  if (!!this.config.labels && Object.keys(this.config.labels).length > 0){\n    setLabels(datavizInstance);\n  }\n  if (!!this.config.sortGroups) {\n    sortGroups(datavizInstance);\n  }\n  if (!!this.config.sortIntervals) {\n    sortIntervals(datavizInstance);\n  }\n\n  const loader = Dataviz.libraries.default.spinner;\n  const library = this.config.library;\n  const type = this.config.type;\n  const containerElement = this.el();\n\n  if (!containerElement || containerElement === undefined) {\n    const msg = `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n    console.error(msg);\n    throw msg;\n    return;\n  }\n\n  let returnValue = datavizInstance;\n\n  if (datavizInstance.config.renderAsPromise) {\n    returnValue = new Promise((resolve, reject) => {\n      const customCallback = this.config.onrendered;\n      datavizInstance.config.onrendered = () => {\n        if (customCallback) {\n          customCallback();\n        }\n        resolve(datavizInstance);\n      }\n    });\n  }\n\n  domReady(function(){\n    const shouldRenderExecutionMetadata = datavizInstance.execution_metadata\n      && datavizInstance.config.ui\n      && datavizInstance.config.ui.executionMetadata;\n    const shouldRenderDownloadBtn = datavizInstance.config.ui\n      && datavizInstance.config.ui.buttons\n      && datavizInstance.config.ui.buttons.download\n      && datavizInstance.config.ui.buttons.download.type;\n    if (datavizInstance.view._prepared && loader.destroy) {\n      loader.destroy.apply(datavizInstance, arguments);\n    }\n    containerElement.innerHTML = '';\n\n    if (Dataviz.libraries[library] === 'undefined'){\n      // Error: Unregistered library\n      const msg = `Incorrect library`;\n      datavizInstance.message(msg);\n      throw msg;\n      return;\n    }\n    else {\n      if (typeof Dataviz.libraries[library][type] === 'undefined') {\n        const msg = `Incorrect chart type`;\n        const mappedMsg = this.config.errorMapping[msg] || msg;\n        datavizInstance.message(mappedMsg);\n        throw msg;\n        return;\n      }\n      else {\n        buildDomWrapper(containerElement,\n          datavizInstance.config\n        );\n        if (shouldRenderDownloadBtn) {\n          renderDownloadButton({\n            element: containerElement,\n            data: datavizInstance.dataset.matrix,\n            type: datavizInstance.config.ui.buttons.download.type,\n            label: datavizInstance.config.ui.buttons.download.label,\n           })\n        }\n        if (shouldRenderExecutionMetadata) {\n          renderExecutionMetadata({\n            element: containerElement,\n            data: datavizInstance.execution_metadata,\n          })\n        }\n        const { renderOnVisible } = datavizInstance.config;\n        if(renderOnVisible){\n          if(typeof IntersectionObserver !== 'undefined'){\n            const chartVisibleCallback = (events, observer) => {\n              events.forEach(el => {\n                if(el.isIntersecting){\n                  if(!datavizInstance.view._rendered){\n                    Dataviz.libraries[library][type].render.call(datavizInstance);\n                    datavizInstance.view._rendered = true;\n                  }\n                }\n              })\n            }\n            const observer = new IntersectionObserver(chartVisibleCallback);\n            observer.observe(containerElement);\n            return;\n          }\n        }\n        if(datavizInstance.config.firstVisibilityState === 'hidden'){\n          if(typeof document !== 'undefined') {\n            let hidden, visibilityChange;\n            if (typeof document.hidden !== \"undefined\") {\n              hidden = \"hidden\";\n              visibilityChange = \"visibilitychange\";\n            } else if (typeof document.msHidden !== \"undefined\") {\n              hidden = \"msHidden\";\n              visibilityChange = \"msvisibilitychange\";\n            } else if (typeof document.webkitHidden !== \"undefined\") {\n              hidden = \"webkitHidden\";\n              visibilityChange = \"webkitvisibilitychange\";\n            }\n            const handleVisibilityChange = () => {\n              if(!document[hidden]) {\n                datavizInstance.view._artifacts.c3.load(datavizInstance.dataset.matrix);\n              }\n            }\n            if(typeof document.addEventListener !== \"undefined\" ||\n               hidden !== undefined){\n              document.addEventListener(visibilityChange, handleVisibilityChange, {\n                once: true\n              });\n            }\n          }\n        }\n        Dataviz.libraries[library][type].render.call(datavizInstance);\n        datavizInstance.view._rendered = true;\n      }\n    }\n  });\n\n  return returnValue;\n};\n\nDataviz.prototype.sortGroups = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortGroups;\n  this.config.sortGroups = (str ? String(str) : null);\n\n  sortGroups(this, str);\n\n  return this;\n};\n\nfunction sortGroups(datavizInstance){\n  // Sort groups\n  if (datavizInstance.config.sortGroups && datavizInstance.data().length > 1) {\n    if (isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.dataset.sortColumns(datavizInstance.config.sortGroups, datavizInstance.dataset.getColumnSum);\n    }\n    else {\n      datavizInstance.dataset.sortRows(datavizInstance.config.sortGroups, datavizInstance.dataset.getRowSum);\n    }\n  }\n}\n\nDataviz.prototype.sortIntervals = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortIntervals;\n  this.config.sortIntervals = (str ? String(str) : null);\n\n  sortIntervals(this);\n\n  return this;\n};\n\nfunction sortIntervals(datavizInstance){\n  if (datavizInstance.config.sortIntervals) {\n    datavizInstance.dataset.sortRows(datavizInstance.config.sortIntervals);\n  }\n}\n\nDataviz.prototype.stacked = function(bool){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.stacked;\n  this.config.stacked = bool ? true : false;\n  return this;\n};\n\nDataviz.prototype.theme = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.theme;\n  this.config.theme = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.title = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.title;\n  this.config.title = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.type = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.type;\n  this.config.type = (str ? convertChartTypes(str) : null);\n  return this;\n};\n\nDataviz.prototype.update = function(){\n  const library = this.config.library;\n  const type = this.config.type;\n  const element = this.el();\n  if (library && type && element && Dataviz.libraries[library][type].update) {\n    Dataviz.libraries[library][type].update.apply(this, arguments);\n  }\n  return this;\n};\n\nDataviz.prototype.width = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.width() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\nDataviz.prototype.exportImage = function({ quality = 0, bgcolor = '#fff' } = {}) {\n  exportImage({\n    node: this.config.containerElement,\n    quality,\n    bgcolor,\n  });\n};\n\nDataviz.prototype.exportData = function(type='json') {\n  exportData({\n    data: this.dataset.matrix,\n    type,\n  });\n};\n\n// Deprecations\nDataviz.prototype.chartType = Dataviz.prototype.type;\nDataviz.prototype.error = Dataviz.prototype.message;\nDataviz.prototype.parseRawData = Dataviz.prototype.data;\nDataviz.prototype.parseRequest = function(){\n  // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n  return this;\n};\nDataviz.prototype.initialize = function(){\n  // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n  return this;\n};\n\nDataviz.version = pkg.version;\n\n// Private\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  let chart100percentWide = '';\n  let rangeChart = '';\n  if (options.legend.position === 'top' || options.legend.position === 'bottom') {\n    chart100percentWide = 'c3-chart-100-percent';\n  }\n  if (options.range) {\n    rangeChart = 'keen-dataviz-range';\n  }\n  let container = `<div class=\"c3-chart ${chart100percentWide} ${rangeChart}\"></div>`;\n  let align = 'horizontal';\n  if (options.legend.position === 'left' || options.legend.position === 'right') {\n    align = 'vertical';\n  }\n  if (options.legend && options.legend.show) {\n    if (options.legend.position === 'top' || options.legend.position === 'left') {\n      container = `<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>${container}`;\n    } else {\n      container = `${container}<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>`;\n    }\n  }\n  if(!options.react){\n    html += `<div class=\"${options.theme}\">`;\n  }\n  if (options.title && options.showTitle) {\n    html += `<div class=\"keen-dataviz-title ${options.theme}-title\">${options.title}</div>`;\n  }\n  html += `<div class=\"keen-dataviz-rendering keen-dataviz-rendering-${align} ${options.theme}-rendering ${options.theme}-rendering-${align}\">${container}</div>`;\n  if (options.notes) {\n    html += `<div class=\"keen-dataviz-notes ${options.theme}-notes\">${options.notes}</div>`;\n  }\n  if(!options.react){\n    html += '</div>';\n  }\n\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(() => {\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport analysesUtilMethods from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\nimport { valueAtDeepKey } from '../utils/object';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  let config = this.config;\n  return function(res){\n    const datasetExtraction = new Dataset()\n      .type('extraction');\n\n    // get keys of the Object, static schema\n    let names = Object.keys(flatten(res.result[0]));\n\n    const tableConfig = config && config.table;\n    if (tableConfig && tableConfig.schema === 'dynamic') {\n      const results = res.result;\n      const keys = {};\n      results.forEach(resultItem => {\n        const resultKeys = Object.keys(flatten(resultItem));\n        if (resultKeys && resultKeys.length) {\n          resultKeys.forEach(keyName => {\n            if (!keys[keyName]) {\n              keys[keyName] = true;\n            }\n          });\n        }\n      });\n      names = Object.keys(keys);\n    }\n    \n    let nameI = 0;\n    names.forEach(value => {\n      datasetExtraction.set([ value, '0' ], value);\n      nameI++;\n    });\n    \n    if (Dataset) {\n      if (config\n        && config.table\n        && config.table.columns) {\n        names = config.table.columns;\n      }\n    }\n\n    for (let i=0; i<res.result.length; i++){\n      let record = [i+1];\n      for (let iNames=0; iNames<names.length; iNames++){\n        record.push(valueAtDeepKey(res.result[i], names[iNames]));\n      }\n      datasetExtraction.matrix[String(i+1)] = record;\n    }\n\n    datasetExtraction.deleteColumn(0);\n\n    return datasetExtraction;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","export function valueAtDeepKey(obj, is, value) {\n  if (typeof is == 'string')\n    return valueAtDeepKey(obj, is.split('.'), value);\n  else if (is.length==1 && value!==undefined && obj !== null &&\n    typeof obj[is[0]] !== 'undefined')\n    return obj[is[0]] = value;\n  else if (is.length==0)\n    return obj;\n  else if (typeof is === 'undefined' || typeof obj === 'undefined'\n    || is === null || obj === null\n    || typeof obj[is[0]] === 'undefined')\n    return null;\n  else\n    return valueAtDeepKey(obj[is[0]], is.slice(1), value);\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n    return parseResponse.call(this, data);\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.config.indexBy;\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n\n    if (!parser) {\n      parser = 'extraction';\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (this.config.title === undefined) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.config.title = title;\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.config.type) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.config.type = type;\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  if (response.execution_metadata) {\n    this.execution_metadata = response.execution_metadata;\n  }\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","import c3 from 'c3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport calculateRange from '../dataset/utils/calculate-range';\nimport { calculateSumForPercents, calculatePercents } from '../dataset/utils/calculate-percents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\nimport Funnel from './default/funnel';\nimport Funnel3d from './default/funnel-3d';\nimport HorizontalFunnel from './default/horizontal-funnel';\nimport HorizontalFunnel3d from './default/horizontal-funnel-3d';\nimport MetricCombo from './default/metric-combo';\n\nexport default function(lib) {\n  let timer;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    const delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        const c3Chart = chart.view._artifacts.c3;\n        if (c3Chart) {\n          const prevSiblingWidth = c3Chart.element.previousSibling ? c3Chart.element.previousSibling.offsetWidth : 0;\n          const nextSiblingWidth = c3Chart.element.nextSibling ? c3Chart.element.nextSibling.offsetWidth : 0;\n          const parentWidth = c3Chart.element.parentNode.parentNode.offsetWidth;\n          const width = parentWidth - prevSiblingWidth - nextSiblingWidth;\n          \n          c3Chart.resize({\n            width,\n          });\n\n        }\n      });\n    }, delay);\n  });\n\n  return defineC3();\n};\n\nfunction defineC3(){\n  const types = {\n    message,\n    metric,\n    table,\n    spinner,\n    'funnel': new Funnel,\n    'funnel-3d': new Funnel3d,\n    'horizontal-funnel': new HorizontalFunnel,\n    'horizontal-funnel-3d': new HorizontalFunnel3d,\n    'metric-combo': new MetricCombo,\n  };\n\n  const c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline',\n  ];\n\n  const getPaddings = (element, paddingName) => {\n    return parseInt(window.getComputedStyle(element)[`padding${paddingName}`].replace('px', ''));\n  }\n\n  function getDefaultOptions(){\n    const ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'),\n      color: {\n        pattern: this.config.colors\n      },\n      data: {\n        colors: { ...this.config.colorMapping },\n        columns: [],\n        type: this.config.type.replace('horizontal-', '')\n      },\n    };\n\n    const renderingElement = this.el();\n\n    let height = renderingElement.offsetHeight;\n\n    height -= (getPaddings(renderingElement, 'Top') + getPaddings(renderingElement, 'Bottom'));\n\n    if (this.config.showTitle) {\n      const titleElement = this.el().querySelector('.keen-dataviz-title');\n      if (titleElement) {\n        height -= titleElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.notes) {\n      const notesElement = this.el().querySelector('.keen-dataviz-notes');\n      if (notesElement) {\n        height -= notesElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    let width = this.el().querySelector('.c3-chart').offsetWidth\n      - (getPaddings(renderingElement, 'Left') + getPaddings(renderingElement, 'Right'));\n    if (width < 0) {\n      width = 0;\n    }\n\n    const DEFAULT_OPTIONS = {\n      size: {\n        width,\n        height:\n          height > 0 ?\n            height\n            : undefined,\n      }\n    };\n\n    const extendedConfig = extendDeep({}, DEFAULT_OPTIONS, this.config, ENFORCED_OPTIONS);\n\n    return extendedConfig;\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        const options = getDefaultOptions.call(this);\n\n        // 100% for charts\n        const sumArray = calculateSumForPercents(this.dataset.matrix);\n        let oldMatrix = [];\n        if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' || type === 'area-step' || type === 'area-spline')) {\n          oldMatrix = this.dataset.matrix;\n          this.dataset.matrix = [this.dataset.matrix[0], ...calculatePercents(this.dataset.matrix, sumArray)];\n          if(!options.sparkline){\n            options.axis = {\n              y: {\n                padding: {\n                  top: 0,\n                },\n                tick: {\n                  format: d => `${d}%`,\n                },\n              },\n            };\n          }\n        }\n\n        // range charts\n        if (options.range) {\n          this.dataset.matrix = [this.dataset.matrix[0], ...calculateRange(this.dataset.matrix)];\n        }\n\n        if (!!this.config.clearOnRender && options.data.columns.length && this.dataset && this.dataset.meta) {\n          const datasetMeta = this.dataset.meta || {};\n          const { type = '' } = datasetMeta;\n          let spliceFrom = 0;\n          const intervalTypes = ['interval'];\n          if (intervalTypes.includes(type)) {\n            spliceFrom = 1;\n          }\n          options.data.columns.splice(spliceFrom);\n        }\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          const msg = 'No data to display';\n          const mappedMsg = this.config.errorMapping[msg] || msg;\n          if (this.config.showErrorMessages) {\n            this.message(mappedMsg);\n          }\n          return;\n        }\n\n        let removeLegend = false;\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.show = false;\n          options.data.columns = [[\n            this.config.title || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n          removeLegend = true;\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.config.dateFormat || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n            removeLegend = true;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n        }\n\n        if (removeLegend){\n          const legendElement = this.el().querySelector('.keen-c3-legend');\n          if (legendElement) {\n            legendElement.remove();\n            options.size.width = this.el().querySelector('.c3-chart').offsetWidth;\n          }\n          options.legend.show = false;\n        }\n\n        const chartTypesWithPartialIntervalIndicator = ['area', 'area-spline', 'area-step', 'line', 'spline', 'step'];\n\n        if (options.partialIntervalIndicator\n          && options.partialIntervalIndicator.show\n          && chartTypesWithPartialIntervalIndicator.indexOf(options.type) > -1\n        ) {\n          const results = options.data.columns && options.data.columns[0];\n          if (results && results.length > 1) {\n            const partialResultsRegion = {\n              axis: 'x',\n              start: new Date(results[results.length - 2]),\n              class: options.partialIntervalIndicator.className\n            };\n            options.regions = [...(options.regions || []), partialResultsRegion];\n          }\n        }\n        \n        if (\n          !(options.tooltip && options.tooltip.show === false)\n          &&\n          (options.legend.show === true ||\n          (options.legend\n            && options.legend.tooltip\n            && options.legend.tooltip.show)\n          )) {\n            \n          // Apply custom tooltip\n          options.tooltip = {\n            contents: c3TooltipContents,\n            format: {\n              title: this.config.tooltip.format.title,\n              value: (value, ratio, id, index) => {\n                let valueFormatted = c3CustomTooltipFiltering.call(this, value, ratio, id, index);\n                if (this.config.tooltip && this.config.tooltip.format && this.config.tooltip.format.value)\n                {\n                  valueFormatted = this.config.tooltip.format.value.call(this, valueFormatted, ratio, id, index);\n                  // Restore value from percents calculation for stacking 100% charts\n                  if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' \n                  || type === 'area-step' || type === 'area-spline')) {\n                    valueFormatted = parseFloat(((valueFormatted / 100) * sumArray[index]).toFixed(2));\n                  }\n                  // Restore value from range calculation for range charts\n                  if (options.range) {\n                    if(id === 'Max'){\n                      valueFormatted += this.dataset.matrix[index+1][2];\n                    }\n                  }\n                  return valueFormatted;\n                }\n                // Restore value from percents calculation for stacking 100% charts\n                if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' \n                || type === 'area-step' || type === 'area-spline')) {\n                  valueFormatted = ((valueFormatted / 100) * sumArray[index]).toFixed(2);\n                  return parseFloat(valueFormatted);\n                }\n                // Restore value from range calculation for range charts\n                if (options.range) {\n                  if(id === 'Max'){\n                    valueFormatted += this.dataset.matrix[index+1][2];\n                  }\n                }\n                return valueFormatted;\n              }\n            }\n          };\n        }\n\n        if (options.legend.show === true) {\n            const c3options = { ...options };\n                // Apply custom color handling\n            c3options.data.color = c3CustomDataMapping.bind(this);\n\n            c3options.legend.hide = true; // hide default c3 legend\n\n            // Render artifacts\n            this.view._artifacts['c3'] = c3.generate(c3options);\n\n            c3PaginatingLegend.call(this, {...options, onLegendRendered: () => {\n              const legendElement = this.el().querySelector('.keen-c3-legend');\n              if (legendElement) {\n                if (\n                    options.legend.position === 'top' ||\n                    options.legend.position === 'bottom'\n                ) {\n                  c3options.size.height -= legendElement.offsetHeight;\n                  this.view._artifacts['c3'].resize({ height: c3options.size.height });\n                } else {\n                  if (c3options.size.width === 0) {\n                    c3options.size.width = this.el().offsetWidth\n                      - getPaddings(this.el(), 'Left')\n                      - getPaddings(this.el(), 'Right');\n                  }\n                  c3options.size.width -= legendElement.offsetWidth;\n                  this.view._artifacts['c3'].resize({ width: c3options.size.width });\n                }\n              }\n            },\n            onPaginated: () => {\n              this.view._artifacts['c3'].flush();\n            }\n          });\n        }\n        else {\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n\n  return types;\n}\n\nfunction c3CustomDataMapping(color, d) {\n  const type = this.config.type;\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (type === 'donut' || type === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  const type = this.config.type;\n\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if (typeof window === 'undefined') return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","export default function (startDate, endDate) {\n  const timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","import * as d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (options) {\n  const cols = options.data.columns;\n  const datavizInstance = this;\n  const chart = this.view._artifacts.c3;\n  let columns = [];\n  const domNode = this.el().querySelector('.' + datavizInstance.config.theme + '-rendering');\n  const legendConfig = datavizInstance.config.legend;\n\n  const pagination = this.view._artifacts.pagination = {\n    ...{\n      hidden: [],\n      labels: [],\n      offset: 0,\n      limit: Math.round((domNode.offsetHeight - 78) / 20),\n      total: 0\n    },\n    ...legendConfig.pagination\n  };\n\n  if (options.legend.sort) {\n    columns = options.legend.sort(cols);\n\n    // update column order in the data, so tooltip will be the same order\n    const columnsSorted = [];\n    const dataColumnsSorted = [];\n    if (cols[0][0] === 'x') {\n      dataColumnsSorted.push(cols[0]);\n    }\n    columns.forEach(column => {\n      let columnData = options.data.columns.find(item => item[0] === column);\n      dataColumnsSorted.push(columnData);\n    });\n    options.data.columns = dataColumnsSorted;\n  } else {\n    for (let i = 0; i < cols.length; i++) {\n      if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n        columns.push(cols[i][0]);\n      }\n    }\n  }\n\n  const legendElement = this.el().querySelector('.keen-c3-legend');\n\n  let align = 'vertical';\n  if (legendConfig.position === 'top' || legendConfig.position === 'bottom') {\n    align = 'horizontal';\n  }\n\n  const paginateHorizontalLeftElement = document.createElement('div');\n  paginateHorizontalLeftElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalLeftElement);\n  }\n\n  const legendItemsElement = document.createElement('div');\n  legendItemsElement.setAttribute('class', `keen-c3-legend-items keen-c3-legend-${align}-items`);\n  legendElement.append(legendItemsElement);\n\n  const paginateVerticalElement = document.createElement('div');\n  paginateVerticalElement.setAttribute('class', 'keen-c3-legend-pagination keen-c3-legend-pagination-icons');\n  if (align === 'vertical') {\n    legendElement.append(paginateVerticalElement);\n  }\n\n  const paginateHorizontalRightElement = document.createElement('div');\n  paginateHorizontalRightElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalRightElement);\n  }\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.offset, pagination.offset + pagination.limit);\n    pagination.total = columns.length;\n    renderLegendComponent.call(datavizInstance, pagination.labels);\n    if (pagination.total > pagination.limit) {\n      renderPaginationComponent.call(datavizInstance);\n    }\n    if (options.onPaginated){\n      options.onPaginated();\n    }\n  }\n\n  function renderLegendComponent(){\n    legendItemsElement.innerHTML = '';\n\n    pagination.labels.forEach(label => {\n      const labelShortened = legendConfig.label.textMaxLength ? label.slice(0, legendConfig.label.textMaxLength - 1) : label;\n      const legendItem = document.createElement(\"div\");\n      legendItem.innerHTML = `<span class='legend-item-text'>${labelShortened}</span>`;\n      legendItem.chartPartId = label;\n      legendItem.setAttribute('class', 'legend-item');\n      legendItemsElement.append(legendItem);\n\n      const legendItemColorSample = document.createElement(\"span\");\n      legendItemColorSample.setAttribute('class', 'legend-item-color-sample');\n      legendItemColorSample.style.backgroundColor = chart.color(legendItem.chartPartId);\n      legendItem.prepend(legendItemColorSample);\n\n      const tooltipElement = document.createElement(\"div\");\n      legendItem.addEventListener('mouseover', (event) => {\n        chart.focus(legendItem.chartPartId);\n        if (legendConfig.tooltip.show && legendItem.chartPartId.length > legendConfig.label.textMaxLength) {\n          tooltipElement.setAttribute('class', `keen-c3-legend-label-overlay keen-c3-legend-position-${legendConfig.position}`);\n          tooltipElement.innerHTML =\n            `${\n              options.legend.tooltip.pointer ? `<div class='overlay-pointer'></div>` : ``\n            }${legendItem.chartPartId}`;\n          legendItem.append(tooltipElement);\n        }\n      });\n      legendItem.addEventListener('mouseout', (event) => {\n        chart.revert();\n        tooltipElement.remove();\n      });\n      legendItem.addEventListener('click', (event) => {\n        let opacity = 1;\n        const isHidden = pagination.hidden.indexOf(legendItem.chartPartId);\n        if (isHidden < 0) {\n          pagination.hidden.push(legendItem.chartPartId);\n          opacity = .35;\n        }\n        else {\n          pagination.hidden.splice(isHidden, 1);\n          opacity = 1;\n        }\n        legendItem.style.opacity = opacity;\n        chart.toggle(legendItem.chartPartId);\n      });\n  });\n\n    if (options.onLegendRendered){\n      options.onLegendRendered();\n      options.onLegendRendered = null;\n    }\n\n  }\n\n  function renderPaginationComponent(){\n    paginateVerticalElement.innerHTML = '';\n    paginateHorizontalLeftElement.innerHTML = '';\n    paginateHorizontalRightElement.innerHTML = '';\n\n    const arrowUp = document.createElement('i');\n    const arrowDown = document.createElement('i');\n\n    const paginate = (direction) => {\n      if (direction === 'forward') {\n        const diff = pagination.offset + pagination.limit;\n        if (diff < pagination.total) {\n          pagination.offset = diff;\n          return;\n        }\n        pagination.offset = 0;\n        return;\n      }\n\n      const diff = pagination.offset - pagination.limit;\n      if (diff >= 0) {\n        pagination.offset = diff;\n        return;\n      }\n\n      pagination.offset = Math.floor(pagination.total/pagination.limit) * pagination.limit;\n    };\n\n    arrowDown.addEventListener('click', () => {\n      paginate('forward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    arrowUp.addEventListener('click', () => {\n      paginate('backward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    if (legendConfig.position === 'left' || legendConfig.position === 'right') {\n      arrowUp.setAttribute('class', 'up');\n      arrowDown.setAttribute('class', 'down');\n      paginateVerticalElement.append(arrowDown);\n      paginateVerticalElement.append(arrowUp);\n    } else {\n      // bottom top\n      arrowUp.setAttribute('class', 'left');\n      arrowDown.setAttribute('class', 'right');\n      paginateHorizontalLeftElement.append(arrowUp);\n      paginateHorizontalRightElement.append(arrowDown);\n    }\n\n  }\n\n  function clearSelectedText() {\n    let selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  let text;\n  let title;\n  // Set config options or defaults\n  const nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  const titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  const valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (let i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (!text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    let name = nameFormat(d[i].name);\n    let value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    let bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value && !isNaN(value)) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      if (name.indexOf('__tooltip_ignore_name_field__') === -1) {\n        text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      }\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","export default function calculateRange(matrix) {\n  const newValues = matrix.slice(1).map(d => d.map((e, i) => {\n    if (typeof e === 'number') {\n      if (i === 1) {\n        return e - d[i + 1];\n      }\n    }\n    return e;\n  }));\n  return newValues;\n}","export function calculateSumForPercents(matrix) {\n  const sumArray = [];\n  matrix.slice(1).forEach((d, i) => {\n    d.forEach((e) => {\n      if (typeof e === 'number') {\n        if (!sumArray[i]) {\n          sumArray[i] = e;\n          return sumArray[i];\n        }\n        sumArray[i] += e;\n      }\n      return sumArray[i];\n    });\n  });\n  return sumArray;\n}\n\nexport function calculatePercents(matrix, sumArray) {\n  const newValues = matrix.slice(1).map((d, i) => d.map((e) => {\n    if (typeof e === 'number') {\n      return (e / sumArray[i]) * 100;\n    }\n    return e;\n  }));\n  return newValues;\n}\n","import { escapeHtml } from '../../utils/escape-html';\nimport renderDownloadButton from '../../utils/render-download-btn';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default {\n  render: function(text){\n    const outer = document.createElement('div');\n    const inner = document.createElement('div');\n    const msg = document.createElement('span');\n\n    const titleContainer = document.createElement('div');\n    const notesContainer = document.createElement('div');\n\n    outer.className = this.config.theme + ' keen-dataviz-box';\n    inner.className = this.config.theme + '-message';\n\n    // Create title and notes for message\n    titleContainer.className = this.config.theme + '-title';\n    titleContainer.innerHTML = escapeHtml(this.config.title || '');\n    notesContainer.className = this.config.theme + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.config.notes || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n\n    if (this.config.title && this.config.showTitle) {\n      outer.appendChild(titleContainer);\n    }\n\n    outer.appendChild(inner);\n\n    if (this.config.notes) {\n      outer.appendChild(notesContainer);\n    }\n\n    if (this.config.ui\n      && this.config.ui.buttons\n      && this.config.ui.buttons.download\n      && this.config.ui.buttons.download.type) {\n        renderDownloadButton({\n          element: this.el(),\n          data: escapeHtml(text) || '',\n          type: this.config.ui.buttons.download.type,\n          label: this.config.ui.buttons.download.label,\n         })\n      }\n\n      if (this.config.utils\n        && this.config.utils.clickToCopyToClipboard) {\n          titleContainer.addEventListener('click', e => copyToClipboard(e.target.innerText, e));\n          notesContainer.addEventListener('click', e => copyToClipboard(e.target.innerText, e));\n          msg.addEventListener('click', e => copyToClipboard(e.target.innerText, e));\n        }\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import exportImage from './export-svg';\nimport exportData from './export-data';\n\nexport default function downloadResults(obj) {\n  const { event, type, data } = obj;\n  event.preventDefault();\n  const supportedFormats = ['json', 'csv', 'jpg', 'jpeg', 'png'];\n  const format = type.toLowerCase();\n  if (!supportedFormats.includes(type)) {\n    throw new Error('This type is not supported');\n  }\n\n  const fileName = 'chart';\n  let fileFormat = '';\n  let content = '';\n\n  if (format === 'png') {\n    exportImage({\n      node: event.currentTarget.previousElementSibling,\n    });\n    return;\n  }\n\n  if (format === 'jpg' || format === 'jpeg') {\n    exportImage({\n      node: event.currentTarget.previousElementSibling,\n      quality: 1,\n      bgcolor: '#fff',\n    });\n    return;\n  }\n\n  if (format === 'json') {\n    exportData({ type: format, data });\n  }\n\n  if (format === 'csv') {\n    exportData({ type: format, data });\n  }\n}\n","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default {\n  render: function(){\n    const color = this.config.colors[0];\n    const theme = this.config.theme;\n    const title = this.config.title;\n    const opts = this.config;\n    let value = '-';\n    let html = '';\n    let prefix = '';\n    let suffix = '';\n    let formattedNum;\n    let valueEl;\n    let flexDifferenceStyle = '';\n    let resultDifference = '';\n    let differenceStyle = '';\n    let smallerValue = '';\n    const { results, previousResults } = this.config;\n    if(results && previousResults){\n      flexDifferenceStyle = previousResults ? ' metric-comparison' : '';\n      smallerValue = previousResults && title ? '-smaller' : '';\n      resultDifference = results.result - previousResults.result;\n      differenceStyle = (resultDifference > 0) ? '-green' : '-red';\n      resultDifference = Math.abs(resultDifference);\n    }\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n        if(results && previousResults){\n          resultDifference = prettyNumber(resultDifference);\n        }\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric keen-dataviz-box' + flexDifferenceStyle + '\" title=\"' + escapeHtml(value) + '\">';\n    if (results && previousResults) {\n      html +=   '<div class=\"' + theme + '-metric' + differenceStyle + '\"><div class=\"arrow' + differenceStyle + '\"> </div>' + escapeHtml(resultDifference) + '</div>';\n    }\n    html +=     '<div class=\"' + theme + '-metric-value' + smallerValue + '\">' + prefix + escapeHtml(formattedNum) + suffix + '</div>';\n    if (title) {\n      html +=   '<div class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</div>';\n    }\n    html +=   '</div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n\n    if (this.config.utils && this.config.utils.clickToCopyToClipboard) {\n      const resultClassName = `.${theme}-metric-value${smallerValue}`;\n      document.querySelector(resultClassName).addEventListener('click', e => copyToClipboard(e.target.innerText, e));\n\n      if (results && previousResults) {\n        const previousResultsClassName = `.${theme}-metric${differenceStyle}`;\n        document.querySelector(previousResultsClassName).addEventListener('click', e => copyToClipboard(e.target.innerText, e));\n      }\n    }\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../utils/escape-html';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nlet currentPage;\nfunction _generateTableRows(datavizInstance, dataset) {\n  let html = '';\n  const defaultConfig = {\n    page: 1,\n    limit: 0,\n    arrows: true\n  };\n  let customConfig = {};\n  if (datavizInstance.config.table && datavizInstance.config.table.pagination) {\n    customConfig = datavizInstance.config.table.pagination;\n  }\n  const config = {\n    ...defaultConfig,\n    ...customConfig\n  };\n\n  if (!currentPage){\n    currentPage = config.page;\n  }\n\n  let datasetPaginated;\n  let pages = 0;\n  if (config.limit === 0) {\n    datasetPaginated = dataset.slice(1); // remove header\n  } else {\n    const start = config.limit * (currentPage - 1) + 1;\n    const end = start + config.limit;\n    datasetPaginated = dataset.slice(start, end);\n    pages = Math.ceil((dataset.length - 1) / config.limit);\n  }\n\n  let columnsArray = datavizInstance.config.table.columns ?\n                   datavizInstance.config.table.columns :\n                   datavizInstance.dataset.matrix[0];\n\n  const colNamesToMap = {};\n  const {\n    mapValues,\n    mapDates,\n  } = datavizInstance.config.table;\n  for (let key in mapValues){\n    colNamesToMap[columnsArray.indexOf(key)] = key;\n  }\n\n  for (let row of datasetPaginated) {\n    html +=   '<tr class=\"table-data-row\">';\n    for (let [index, rowColValue] of row.entries()) {\n      if (mapDates && rowColValue instanceof Date) {\n        rowColValue = mapDates(rowColValue);\n      }\n\n      let rowColValueEscaped = escapeHtml(rowColValue);\n      if(colNamesToMap[index]){\n        html += `<td>${mapValues[colNamesToMap[index]](rowColValueEscaped)}</td>`;\n        continue;\n      }\n      html += `<td>${rowColValueEscaped}</td>`\n    }\n    html +=   '</tr>';\n  }\n\n  if (pages > 1){\n    html += `<tr class=\"table-pagination\"><td colspan=\"999\">`;\n    let pageNumber = 1;\n    const prevPage = (currentPage === 1) ? 1 : (currentPage - 1);\n    const nextPage = (currentPage === pages) ? pages : (currentPage + 1);\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${prevPage}\"><</a>`;\n    }\n    while (pageNumber <= pages){\n      html += `<a class=\"btn ${\n        pageNumber === currentPage ? 'active' : ''\n      }\" data-page=\"${pageNumber}\">${pageNumber}</a>`;\n      pageNumber++;\n    }\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${nextPage}\">></a>`;\n    }\n    html += '</td></tr>';\n  }\n\n  return html;\n}\n\nfunction _generateTableHeader(datavizInstance, dataset) {\n  let html = '';\n  let fieldNumber = -1;\n  const tableConfig = datavizInstance.config.table;\n  const columnNames =\n    (tableConfig && tableConfig.columns)\n    || dataset[0];\n  for (let colName of columnNames) {\n    let colNameEscaped = escapeHtml(colName);\n    fieldNumber +=1;\n    html +=  `<th fieldNumber=\"${fieldNumber}\">${colNameEscaped}</th>`;\n  }\n  return html;\n}\n\n\n  const render = function() {\n    const dataset = this.dataset.matrix;\n\n    const el = this.el();\n    const theme = this.config.theme;\n    const datavizInstance = this;\n\n    let html = '';\n\n    const isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      const msg = 'No data to display';\n      const mappedMsg = this.config.errorMapping[msg] || msg;\n      if (this.config.showErrorMessages) {\n        this.message(mappedMsg);\n      }\n      return;\n    }\n\n    // Open wrapper\n    html += `<div class=\"${theme}-table\">`;\n\n    // Static, scrollable table\n    html +=   `<table class=\"${theme}-table-dataset\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    html +=       _generateTableHeader(datavizInstance, dataset);\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows(datavizInstance, dataset);\n    html +=     '</tbody>';\n    html +=   '</table>';\n/* */\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector(`.${theme}-rendering`).innerHTML = html;\n\n    el\n      .querySelectorAll(`.${theme}-rendering th`)\n      .forEach((item) => {\n        item.addEventListener('click', (event) => {\n          let sortOrder = event.target.getAttribute('order') || 'asc';\n          let fieldNumber =  event.target.getAttribute('fieldNumber');\n          let checker = function (a, b) {\n            let sortOrderNumber = (sortOrder === 'asc') ? 1 : -1;\n\n            if (typeof a[fieldNumber] === 'string') {\n              let nameA = a[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              let nameB = b[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              if (nameA < nameB) {\n                return -1 * sortOrderNumber;\n              }\n              if (nameA > nameB) {\n                return 1* sortOrderNumber;\n              }\n\n              // names must be equal\n              return 0;\n            }\n            return (a[fieldNumber] - b[fieldNumber]) * sortOrderNumber;\n          };\n\n          if (sortOrder === 'asc') {\n            sortOrder = 'desc';\n          } else {\n            sortOrder = 'asc'\n          }\n          event.target.setAttribute('order', sortOrder);\n\n          const first = this.dataset.matrix.shift();\n          this.dataset.matrix.sort(checker);\n          this.dataset.matrix.unshift(first);\n\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n          attachBtnEventListeners();\n        });\n      });\n\n\n    const attachBtnEventListeners = () => {\n      el.querySelectorAll('.btn').forEach(btn => {\n        btn.addEventListener('click', (event) => {\n          currentPage = parseInt(event.target.getAttribute('data-page'));\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n             attachBtnEventListeners();\n          }, true);\n      });\n    };\n\n    attachBtnEventListeners(datavizInstance, el, theme);\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n\n    if (this.config.utils && this.config.utils.clickToCopyToClipboard) {\n      const tableClass = `.${theme}-table-dataset`;\n      document.querySelector(tableClass)\n        .addEventListener('click', (e) => {\n          const { nodeName, innerText } = e.target;\n          if (nodeName === 'TD') {\n            copyToClipboard(innerText, e);\n          }\n        });\n    }\n  };\n\n\n\nconst update = function(){\n    // no special update handling\n    this.render();\n  };\n\nconst destroy=  function(){};\n\nexport default { render, update, destroy };\n","export default {\n  render: function(){\n    let html = '';\n    const artifacts = this.view._artifacts.spinner = {};\n\n    // Build DOM element\n    html += '<div class=\"' + this.config.theme + '\">';\n    html +=   '<div class=\"keen-spinner-container keen-dataviz-box\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default class Funnel {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping,\n      utils,\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      marginBetweenSteps,\n      resultValues,\n      hover,\n      minimalSize,\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 30, left: 200 };\n    let yMarginElement = 0;\n    if(marginBetweenSteps){\n      yMarginElement = 5;\n    }\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemHeight = svgHeight/(matrix.length - 1);\n    let prevElemWidth = svgWidth;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgWidth - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: ((svgWidth - prevElemWidth)/2),\n            y: elemHeight * i + yMarginElement\n          },\n          {\n            x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n            y: elemHeight * i + yMarginElement\n          },\n        ]\n        if(i !== 0){\n          if (countingMethod === \"relative\") {\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : (prevElemWidth =\n                  (prevElemWidth * d[1]) / matrix[i][1]);\n            percent = ((d[1] / matrix[i][1]) * 100).toFixed(decimals);\n          }\n          if (countingMethod === \"absolute\") {\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : (prevElemWidth = (svgWidth * d[1]) / matrix[1][1]);\n            percent = ((d[1] / matrix[1][1]) * 100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n              y: elemHeight * (i + 1)\n            },\n            {\n              x: ((svgWidth - prevElemWidth)/2),\n              y: elemHeight * (i + 1)\n            }\n          ]\n        }\n    });\n\n  \n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid slice')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/2);\n        })\n        .attr('x2', (d) => { return d.points[1].x + margin.left; })\n        .attr('y2', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/2);\n        })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', polygons[polygons.length-1].points[2].y\n                    + margin.top + (yMarginElement/2))\n        .attr('x2', polygons[polygons.length-1].points[2].x + margin.left)\n        .attr('y2', polygons[polygons.length-1].points[2].y\n                    + margin.top + (yMarginElement/2))\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'start')\n        .attr('x', 20)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 5\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'end')\n        .attr('x', (d) => {\n          return d.points[0].x + ((d.points[3].x - d.points[0].x)/2)\n                  + (margin.left * 0.9);\n        })\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 5\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          if(yMarginElement === 0){\n            return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                    + margin.top + 16\n          }\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 12\n        })\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          if(yMarginElement === 0){\n            return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                    + margin.top;\n          }\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement - 5;\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n\n    // click to copy\n    if (utils && utils.clickToCopyToClipboard) {\n      const label = chart.selectAll('text');\n\n      label.on('click', handleClickToCopy);\n\n      function handleClickToCopy(data) {\n        const { percent, result } = data;\n        if (resultValues) {\n          copyToClipboard(result, d3.event);\n        } else if (show) {\n          copyToClipboard(percent, d3.event);\n        }\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default class Funnel3d {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping,\n      utils,\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      resultValues,\n      effect3d,\n      hover,\n      minimalSize,\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 60, left: 200 };\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemHeight = svgHeight/(matrix.length - 1);\n    const yMarginElement = elemHeight * 0.3;\n    const shadowCut = (yMarginElement * 2.5);\n    let prevElemWidth = svgWidth;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgWidth - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: ((svgWidth - prevElemWidth)/2),\n            y: elemHeight * i + yMarginElement\n          },\n          {\n            x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n            y: elemHeight * i + yMarginElement\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : prevElemWidth = prevElemWidth * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : prevElemWidth = svgWidth * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n              y: elemHeight * (i + 1)\n            },\n            {\n              x: ((svgWidth - prevElemWidth)/2),\n              y: elemHeight * (i + 1)\n            }\n          ]\n        }\n    });\n\n    //funnel shadows preparing\n    const polygonsShadows = polygons.map((d, i) => {\n        return {\n          label: d.label,\n          points: [\n            {\n              x: d.points[3].x,\n              y: d.points[3].y\n            },\n            {\n              x: d.points[2].x,\n              y: d.points[2].y\n            },\n            {\n              x: effect3d === 'left'\n              ? d.points[2].x\n              : d.points[2].x - shadowCut < svgWidth/2\n                ? svgWidth/2 + 5\n                : d.points[2].x - shadowCut,\n              y: effect3d === 'left'\n              ? d.points[2].y\n              : d.points[2].y + (yMarginElement/1.5)\n            },\n            {\n              x: effect3d === 'right'\n              ? d.points[3].x\n              : d.points[3].x + shadowCut > svgWidth/2\n                ? svgWidth/2 - 5\n                : d.points[3].x + shadowCut,\n              y: effect3d === 'right'\n              ? d.points[3].y\n              : d.points[3].y + (yMarginElement/1.5)\n            },\n          ]\n        }\n    })\n\n    //connecting funnels with shadows for rendering\n    const polygons3d = polygons.concat(polygonsShadows);\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons3d)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(i > (polygons.length - 1)){\n            if(colorMapping[d.label]){\n              return d3.rgb(colorMapping[d.label]).darker(1.5);\n            }\n            return d3.rgb(colors[i - (polygons.length)]).darker(1.5);\n          }\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', (d) => {\n           return d.points[0].y + margin.top - (yMarginElement/5);\n         })\n        .attr('x2', (d, i) => {\n          if(i === 0){\n            return d.points[1].x + margin.left;\n          }\n          return d.points[1].x + margin.left - shadowCut;\n        })\n        .attr('y2', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/5);\n        })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', polygons[polygons.length-1].points[2].y + margin.top\n                    + yMarginElement - (yMarginElement/5))\n        .attr('x2', polygons[polygons.length-1].points[2].x\n                    + margin.left - shadowCut )\n        .attr('y2', polygons[polygons.length-1].points[2].y + margin.top\n                    + yMarginElement - (yMarginElement/5))\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'start')\n        .attr('x', 20)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 5 + (yMarginElement/4)\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'end')\n        .attr('x', (d) => {\n          return d.points[0].x + ((d.points[3].x - d.points[0].x)/2) + 130;\n        })\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 5;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n      //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 18\n        })\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 3\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n\n        // click to copy\n    if (utils && utils.clickToCopyToClipboard) {\n      const label = chart.selectAll('text');\n\n      label.on('click', handleClickToCopy);\n\n      function handleClickToCopy(data) {\n        const { percent, result } = data;\n        if (resultValues) {\n          copyToClipboard(result, d3.event);\n        } else if (show) {\n          copyToClipboard(percent, d3.event);\n        }\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default class HorizontalFunnel {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping,\n      utils,\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      marginBetweenSteps,\n      resultValues,\n      hover,\n      minimalSize,\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 100, left: 10 };\n    let xMarginElement = 0;\n    if(marginBetweenSteps){\n      xMarginElement = 5;\n    }\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemWidth= svgWidth/(matrix.length - 1);\n    let prevElemHeight = svgHeight;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgHeight - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2)\n          },\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = prevElemHeight * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = svgHeight * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined'\n          || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n            },\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2)\n            }\n          ]\n        }\n    });\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement/2);\n        })\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement/2);\n        })\n        .attr('y2', (d) => { return d.points[0].y + margin.top; })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', svgWidth + margin.left - (xMarginElement/2))\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', polygons[polygons.length-1].points[3].x\n                    + margin.left + (xMarginElement/2))\n        .attr('y2', polygons[polygons.length-1].points[3].y + margin.top)\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight + (margin.bottom * 0.5) + margin.top)\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', (d) => {\n          if(d.points[2].y + ((d.points[3].y - d.points[0].y)/2)\n          + (elemWidth/4) > svgHeight + margin.bottom - 40 + margin.top){\n            return svgHeight + margin.bottom - 40 + margin.top;\n          }\n          return d.points[2].y + ((d.points[3].y - d.points[0].y)/2)\n                  + (elemWidth/4) + margin.top;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 16)\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2+ margin.top - 3)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n\n    // click to copy\n    if (utils && utils.clickToCopyToClipboard) {\n      const label = chart.selectAll('text');\n\n      label.on('click', handleClickToCopy);\n\n      function handleClickToCopy(data) {\n        const { percent, result } = data;\n        if (resultValues) {\n          copyToClipboard(result, d3.event);\n        } else if (show) {\n          copyToClipboard(percent, d3.event);\n        }\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default class HorizontalFunnel3d {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping,\n      utils,\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      resultValues,\n      effect3d,\n      hover,\n      minimalSize,\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 100, left: 10 };\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemWidth= svgWidth/(matrix.length - 1);\n    const xMarginElement = elemWidth * 0.3;\n    const shadowCut = (xMarginElement/1.5);\n    let prevElemHeight = svgHeight;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgHeight - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2)\n          },\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = prevElemHeight * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = svgHeight * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n            },\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2)\n            }\n          ]\n        }\n    });\n\n    //funnel shadows preparing\n    const polygonsShadows = polygons.map((d, i) => {\n        return {\n          label: d.label,\n          points: [\n            {\n              x: d.points[0].x,\n              y: d.points[0].y\n            },\n            {\n              x: d.points[1].x,\n              y: d.points[1].y\n            },\n            {\n              x: effect3d === 'top'\n              ? d.points[1].x\n              : d.points[1].x - shadowCut,\n              y: effect3d === 'top'\n              ? d.points[1].y\n              : d.points[1].y - xMarginElement < svgHeight/2\n                ? svgHeight/2 + 5\n                : d.points[1].y - xMarginElement\n            },\n            {\n              x: effect3d === 'bottom'\n              ? d.points[0].x\n              : d.points[0].x - shadowCut,\n              y: effect3d === 'bottom'\n              ? d.points[0].y\n              : d.points[0].y + xMarginElement > svgHeight/2\n                ? svgHeight/2 - 5\n                : d.points[0].y + xMarginElement\n            },\n          ]\n        }\n    })\n\n    //connecting funnels with shadows for rendering\n    const polygons3d = polygons.concat(polygonsShadows);\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons3d)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(i > (polygons.length - 1)){\n            if(colorMapping[d.label]){\n              return d3.rgb(colorMapping[d.label]).darker(1.5);\n            }\n            return d3.rgb(colors[i - (polygons.length)]).darker(1.5);\n          }\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement * 0.8);\n        })\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement * 0.8);\n        })\n        .attr('y2', (d) => { return d.points[0].y + margin.top; })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', svgWidth + margin.left + (xMarginElement/4))\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', polygons[polygons.length-1].points[3].x\n                    + margin.left + (xMarginElement/4))\n        .attr('y2', polygons[polygons.length-1].points[3].y + margin.top)\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[0].x + margin.left + (elemWidth * 0.25)\n        })\n        .attr('y', svgHeight + (margin.bottom * 0.4) + margin.top)\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[0].x + margin.left + (elemWidth * 0.25)\n        })\n        .attr('y', (d) => {\n          if(d.points[2].y + (elemWidth/4) >\n          svgHeight + margin.bottom - 40){\n            return svgHeight + margin.bottom - 40 + margin.top;\n          }\n          if(d.points[2].y + (elemWidth/4) < d.points[1].y){\n            return d.points[1].y + 20 + margin.top;\n          }\n          return d.points[2].y + (elemWidth/4) + 10 + margin.top;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 16)\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2+ margin.top - 3)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n\n    // click to copy\n    if (utils && utils.clickToCopyToClipboard) {\n      const label = chart.selectAll('text');\n\n      label.on('click', handleClickToCopy);\n\n      function handleClickToCopy(data) {\n        const { percent, result } = data;\n        if (resultValues) {\n          copyToClipboard(result, d3.event);\n        } else if (show) {\n          copyToClipboard(percent, d3.event);\n        }\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","/* eslint-env browser */\nimport c3 from 'c3';\nimport { each } from '../../utils/each';\nimport { prettyNumber } from '../../utils/pretty-number';\nimport copyToClipboard from '../../utils/copy-to-clipboard';\n\nexport default class MetricCombo {\n  render() {\n    const {\n      container,\n      metricResults,\n      title,\n      tooltip,\n      utils,\n    } = this.config;\n\n    const colors = ['#c3c4cc'];\n    const columns = [];\n    columns[0] = [];\n    each(this.dataset.selectColumn(0), (c, i) => {\n      let cell;\n      if (i > 0) {\n        cell = new Date(c);\n      }\n      columns[0][i] = cell;\n    });\n    columns[0][0] = 'x';\n\n    each(this.data()[0], (c, i) => {\n      if (i > 0) {\n        columns.push(this.dataset.selectColumn(i));\n      }\n    });\n\n    const prevResult = (metricResults && metricResults.previous && metricResults.previous.result)\n      || 0;\n    const currResult = (metricResults && metricResults.current && metricResults.current.result)\n      || 0;\n    const count = currResult - prevResult;\n    const percentDifference = prevResult === 0 ? '-' : prettyNumber(Math.round((count / prevResult) * 100));\n    let labelClass = 'keen-dataviz-metric-green';\n    let iconClass = 'arrow-green';\n\n    if (percentDifference < 0) {\n      labelClass = 'keen-dataviz-metric-red';\n      iconClass = 'arrow-red';\n    }\n\n    const containerTitle = (this.config.showTitle && title) ? `<div class=\"keen-dataviz-title\">${title}</div>` : '';\n    const containerElement = document.querySelector(container);\n    containerElement.innerHTML = `\n      <div class=\"keen-dataviz\">\n        <div class=\"keen-dataviz-metric-combo\">\n          <div class=\"metric-combo-data\">\n            ${containerTitle} \n            <div class=\"percent-difference ${labelClass}\"><div class=\"${iconClass}\"></div> ${percentDifference} %</div>\n            <div class=\"current-count ${labelClass}\"> ${prettyNumber(count)} </div>\n          </div>\n          <div class=\"keen-dataviz-rendering\">\n            <div class=\"c3-chart\"></div>\n          </div>\n        </div>\n      </div>`;\n    const chartRoot = containerElement.querySelector('.c3-chart');\n    const chart = c3.generate({\n      bindto: chartRoot,\n      color: {\n        pattern: colors,\n      },\n      title,\n      legend: {\n        show: false,\n      },\n      data: {\n        x: 'x',\n        columns,\n        type: 'area-spline',\n        selection: {\n          draggable: false,\n          enabled: true,\n          multiple: true,\n        },\n      },\n      point: {\n        r: 0,\n        focus: {\n          expand: {\n            r: 5,\n            enabled: true,\n          },\n        },\n        select: {\n          r: 5,\n          enabled: true,\n        },\n      },\n      axis: {\n        y: {\n          show: false,\n        },\n        x: {\n          show: false,\n        },\n      },\n      grid: {\n        x: {\n          show: false,\n        },\n        y: {\n          show: false,\n        },\n      },\n      padding: {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: -4,\n      },\n      tooltip,\n    });\n\n    if (utils && utils.clickToCopyToClipboard) {\n      const currentCount = document.querySelector('.current-count').innerText;\n      document.querySelector('.keen-dataviz-metric-combo')\n        .addEventListener('click', e => copyToClipboard(currentCount, e));\n    }\n  }\n\n  update() {\n    this.destroy();\n    this.render();\n  }\n\n  destroy() {\n    const { container } = this.config;\n    const containerElement = document.querySelector(container);\n    const chartContainer = containerElement.querySelector('.c3-chart');\n    chartContainer.remove();\n  }\n}\n","import copyToClipboard from './copy-to-clipboard';\n\nfunction removeClassWithTimeOut(element, className = 'copied', ms = 1000) {\n  setTimeout(() => {\n    element.classList.remove(className);\n  }, ms);\n}\n\nfunction handleCopyToClipboard(event) {\n  const { target, target: { nodeName } } = event;\n\n  let value;\n  if (nodeName === 'DD') {\n    value = target.innerText;\n    if (!target.classList.contains('copied')) {\n      target.classList.add('copied');\n      removeClassWithTimeOut(target);\n    }\n  }\n  if (nodeName === 'DT') {\n    value = target.nextSibling.innerText;\n    if (!target.nextSibling.classList.contains('copied')) {\n      target.nextSibling.classList.add('copied');\n      removeClassWithTimeOut(target.nextSibling);\n    }\n  }\n\n  copyToClipboard(value);\n}\n\nexport default function renderExecutionMetadata({\n  element,\n  data,\n} = {}) {\n  const dataList = document.createElement('dl');\n  dataList.classList = 'keen-dataviz-execution-meta';\n\n  if (Object.keys(data).length) {\n    Object.keys(data).forEach((item) => {\n      const dt = document.createElement('dt');\n      dt.innerText = item.replace(/_/g, ' ');\n      dt.addEventListener('click', e => handleCopyToClipboard(e));\n\n      const dd = document.createElement('dd');\n      dd.innerText = data[item];\n      dd.addEventListener('click', e => handleCopyToClipboard(e));\n\n      dataList.append(dt);\n      dataList.append(dd);\n    });\n  } else {\n    dataList.innerText = 'No execution metadata available';\n  }\n\n  element.append(dataList);\n}\n","import autocollector from './autocollector';\nimport modern from './modern';\nimport dracula from './dracula';\n\nexport default {\n  autocollector,\n  modern,\n  dracula,\n};","const palette = {\n  colors: [\n    '#5E77FF',\n    '#9C60FE',\n    '#F162FE',\n    '#FD65B7',\n    '#FD6768',\n    '#FDB86A',\n    '#F2FC6C',\n    '#A5FC6E',\n    '#71FB85',\n    '#73FBD0',\n    '#76DDFA',\n    '#76f4fa',\n    '#bb76fa',\n    '#fa76bf'\n  ]\n};\n\nexport default palette;","const palette = {\n  colors: [\n    '#45B2E8',\n    '#D9540D',\n    '#2CAB72',\n    '#2C4BAB',\n    '#EDDD02',\n    '#E84545',\n    '#E845CE',\n    '#5FCEC9',\n    '#E89F45',\n    '#28E43F',\n    '#B765C0',\n    '#458AE8',\n    '#AB2C2C',\n    '#AB2C75',\n    '#27E5FF',\n    '#7168F2',\n    '#FF932B',\n    '#855D00',\n    '#ACE845',\n    '#1C91B4'\n  ]\n};\n\nexport default palette;","const palette = {\n  colors: [\n    '#8be9fd',\n    '#50fa7b',\n    '#ffb86c',\n    '#ff79c6',\n    '#bd93f9',\n    '#ff5555',\n    '#f1fa8c',\n  ]\n};\n\nexport default palette;"],"sourceRoot":""}