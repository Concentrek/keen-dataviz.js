{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///external \"d3\"","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/utils/escape-html.js","webpack:///./lib/utils/svg-text-wrap.js","webpack:///./lib/utils/extend.js","webpack:///./lib/utils/assert-date-string.js","webpack:///./lib/utils/strip-html-tags.js","webpack:///external \"c3\"","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/utils/export-svg.js","webpack:///./lib/utils/render-download-btn.js","webpack:///./lib/utils/extend-deep.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/dataset/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/palettes/dracula.js","webpack:///./lib/palettes/modern.js","webpack:///./lib/palettes/autocollector.js","webpack:///./lib/palettes/index.js","webpack:///./lib/libraries/default/metric-combo.js","webpack:///./lib/libraries/default/horizontal-funnel-3d.js","webpack:///./lib/libraries/default/horizontal-funnel.js","webpack:///./lib/libraries/default/funnel-3d.js","webpack:///./lib/libraries/default/funnel.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/libraries/default/metric.js","webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./node_modules/dom-to-image/src/dom-to-image.js","webpack:///./lib/utils/download-results.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/dataset/utils/calculate-percents.js","webpack:///./lib/dataset/utils/calculate-range.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///./lib/libraries/index.js","webpack:///./lib/data.js","webpack:///./lib/dataset/utils/object.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/index.js","webpack:///./lib/browser.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__8__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","each","cb","Array","length","prettyNumber","input","sciNo","Number","toPrecision","prefix","suffixes","String","Math","abs","recurse","iteration","split","rhs","charAt","numNumerals","escapeHtml","string","escape","str","match","matchHtmlRegExp","exec","html","index","lastIndex","charCodeAt","substring","textWrap","text","width","d3","select","this","words","reverse","word","line","lineNumber","x","attr","y","tspan","append","dy","pop","push","join","node","getComputedTextLength","extend","target","arguments","prop","testObject","getTime","isNaN","testString","test","_typeof","stripHtmlTags","inputString","replace","len","list","appendColumn","appendRow","_createNullList","_each","self","label","slice","undefined","matrix","row","cell","concat","_createNullList2","default","newRow","col","selectColumn","obj","quality","bgcolor","Error","domtoimage","toBlob","then","blob","_fileSaver","saveAs","_domToImage","_ref","element","_ref$label","_ref$type","type","data","_toConsumableArray","parentNode","children","find","child","className","button","document","createElement","innerText","addEventListener","event","_downloadResults2","insertBefore","nextSibling","_downloadResults","extendDeep","key","average","arr","start","end","set","sum","val","parseFloat","maximum","nums","max","apply","minimum","min","getColumnAverage","getRowAverage","getColumnSum","getRowSum","getColumnMaximum","getRowMaximum","getColumnMinimum","getRowMinimum","getColumnLabel","getRowIndex","del","filter","insert","sort","update","_extend","Dataset","config","meta","coords","colIndex","indexOf","rowIndex","colResult","rowResult","selectRow","analyses","parser","_parsers2","g","Function","eval","e","colors","autocollector","modern","dracula","_c","_prettyNumber","MetricCombo","_this","_config","container","metricResults","title","tooltip","columns","dataset","Date","prevResult","previous","result","count","current","percentDifference","round","labelClass","iconClass","containerTitle","showTitle","containerElement","querySelector","innerHTML","chartRoot","c3","generate","bindto","color","pattern","legend","show","selection","draggable","enabled","multiple","point","focus","expand","axis","grid","padding","left","right","top","bottom","destroy","render","remove","_svgTextWrap","HorizontalFunnel3d","labelMapping","colorMapping","opts","_config$funnel","funnel","_config$funnel$percen","percents","countingMethod","decimals","lines","resultValues","effect3d","hover","minimalSize","margin","funnelContainer","chart","el","theme","svgWidth","style","svgHeight","elemWidth","xMarginElement","shadowCut","prevElemHeight","percent","toFixed","minimalSizeStep","polygons","map","newPoints","keys","parseInt","points","polygonsShadows","polygons3d","selectAll","enter","rgb","darker","handleMouseOver","polygonsHover","labelHover","thisLabel","handleMouseOut","on","HorizontalFunnel","marginBetweenSteps","Funnel3d","elemHeight","yMarginElement","prevElemWidth","Funnel","view","_artifacts","spinner","interval","clearInterval","radius","_escapeHtml","currentPage","_generateTableRows","datavizInstance","customConfig","table","pagination","page","limit","arrows","datasetPaginated","pages","ceil","columnsArray","checkArray","mapValues","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","entries","_ref2","_slicedToArray","rowCol","timezone","toString","rowColEscaped","err","return","pageNumber","prevPage","nextPage","msg","mappedMsg","errorMapping","showErrorMessages","message","fieldNumber","tableConfig","columnNames","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","colName","colNameEscaped","_generateTableHeader","querySelectorAll","forEach","item","sortOrder","getAttribute","setAttribute","first","shift","b","sortOrderNumber","nameA","toUpperCase","nameB","unshift","attachBtnEventListeners","btn","onrendered","suffix","formattedNum","flexDifferenceStyle","resultDifference","differenceStyle","smallerValue","results","previousResults","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","XMLHttpRequest","open","responseType","onload","response","onerror","console","error","send","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f","global","HTMLAnchorElement","h","URL","webkitURL","j","download","rel","href","origin","location","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","Blob","body","HTMLElement","safari","userAgent","FileReader","onloadend","readAsDataURL","k","util","parseExtension","mimeType","url","extension","toLowerCase","WOFF","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","content","isDataUrl","search","canvasToBlob","canvas","Promise","resolve","binaryString","atob","toDataURL","binaryArray","Uint8Array","resolveUrl","baseUrl","doc","implementation","createHTMLDocument","base","head","appendChild","getAndEncode","TIMEOUT","impl","options","cacheBust","placeholder","request","onreadystatechange","readyState","fail","encoder","ontimeout","timeout","imagePlaceholder","uid","random","pow","delay","ms","arg","asArray","arrayLike","array","escapeXhtml","makeImage","uri","reject","image","Image","src","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","styleProperty","getComputedStyle","getPropertyValue","newUtil","inliner","URL_REGEX","inlineAll","shouldProcess","readUrls","urls","inline","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","webFont","cssStrings","styleSheets","cssRules","sheet","bind","log","rule","CSSRule","FONT_FACE_RULE","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","newImages","defaultOptions","toSvg","toPng","draw","toJpeg","toPixelData","getContext","getImageData","copyOptions","HTMLCanvasElement","cloneNode","clone","original","parent","childClone","cloneChildrenInOrder","cloneChildren","source","copyProperties","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","HTMLInputElement","SVGElement","SVGRectElement","attribute","processClone","embedFonts","inlineImages","backgroundColor","XMLSerializer","serializeToString","xhtml","foreignObject","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","makeNodeCopy","copyStyle","cloneStyle","clonePseudoElements","formatProperty","copyUserInput","fixSvg","styleNode","preventDefault","format","includes","fileFormat","_exportSvg2","currentTarget","previousElementSibling","encodeURIComponent","JSON","stringify","csvContent","generateCsvContent","htmlElement","fileName","click","removeChild","_exportSvg","_renderDownloadBtn","outer","inner","titleContainer","notesContainer","notes","ui","buttons","_renderDownloadBtn2","calculateSumForPercents","sumArray","calculatePercents","defaultTitleFormat","defaultValueFormat","nameFormat","tooltip_format_name","titleFormat","tooltip_format_title","valueFormat","tooltip_format_value","CLASS","ratio","id","levelColor","tooltipName","cols","legendConfig","_extends","hidden","labels","offset","offsetHeight","total","dataColumnsSorted","column","columnData","_assertDateString2","legendElement","align","position","paginateHorizontalLeftElement","legendItemsElement","paginateVerticalElement","paginateHorizontalRightElement","paginateData","labelShortened","textMaxLength","legendItem","chartPartId","legendItemColorSample","prepend","tooltipElement","pointer","revert","opacity","isHidden","splice","toggle","onLegendRendered","arrowUp","arrowDown","paginate","direction","diff","floor","clearSelectedText","onPaginated","empty","getSelection","removeAllRanges","_assertDateString","startDate","endDate","timeDiff","months","date","getMonth","getFullYear","getDate","lib","timer","fn","onresize","resize","attachEvent","bindResizeListener","clearTimeout","visuals","c3Chart","prevSiblingWidth","previousSibling","offsetWidth","nextSiblingWidth","internal","horizontalDistance","pos","xIndex","axis_rotated","findClosest","values","closest","$$","minDist","point_sensitivity","Infinity","v","isBarType","shape","main","bars","getTargetSelectorSuffix","bar","isWithinBar","mouse","dist","types","metric","funnel-3d","horizontal-funnel","horizontal-funnel-3d","metric-combo","getPaddings","paddingName","ENFORCED_OPTIONS","renderingElement","titleElement","notesElement","DEFAULT_OPTIONS","size","_extendDeep","_calculatePercents","stacking","tick","range","_calculateRange2","clearOnRender","_datasetMeta$type","spliceFrom","removeLegend","rotated","dateFormat","_defaultDateFormat2","culling","stacked","groups","categories","partialIntervalIndicator","partialResultsRegion","class","regions","contents","c3TooltipContents","valueFormatted","scope","c3options","hide","c3PaginatingLegend","flush","defineC3","indexBy","query","selectedParser","parserArgs","metadata","analysis_type","event_collection","filters","group_by","timeframe","steps","display_name","analysis","getDefaultTitle","visualization","chart_type","getDefaultType","updateColumn","updateRow","_stripHtmlTags","_dataset","valueAtDeepKey","is","flatten","ob","toReturn","flatObject","parsers","_flatten","_object","res","record","grouped-metric","grouped-interval","group","double-grouped-metric","rowLabel","double-grouped-interval","extraction","datasetExtraction","names","schema","resultItem","resultKeys","keyName","iNames","deleteColumn","q","_append","sortColumns","comp","analysesUtilMethods","op","insertColumn","sortRows","_analyses","insertRow","filterColumns","selectedColumn","ri","filterRows","deleteRow","Dataviz","_defaultOptions","_defineProperty","showDeprecationWarnings","showLoadingSpinner","labelMappingRegExp","library","sortGroups","sortIntervals","order","transition","marginBetweenElements","palette","palettes","convertChartTypes","sparkline","_prepared","_rendered","prepare","firstVisibilityState","visibilityState","setLabels","mapLabelsExec","valueAfterMatching","regExpAndLabel","mapLabels","labelMappingDimension","areachart","barchart","columnchart","linechart","piechart","domReady","DOMContentLoaded","removeEventListener","testDom","libraries","_libraries2","register","actions","method","nodeName","visual","attributes","chartOptions","num","loader","firstResult","isArray","timeframes","resultTimeframe","timeframeItem","getLabel","ds2","returnValue","renderAsPromise","customCallback","shouldRenderDownloadBtn","chart100percentWide","rangeChart","react","buildDomWrapper","renderOnVisible","IntersectionObserver","events","observer","isIntersecting","observe","visibilityChange","msHidden","webkitHidden","load","once","bool","exportImage","_ref2$quality","_ref2$bgcolor","chartType","parseRawData","parseRequest","initialize","version","pkg","_index","extendKeenGlobalObject","env","KeenDataviz","KeenDataset","Keen","keenGlobals","webpackKeenGlobals"],"mappings":"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","file":"keen-dataviz.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__8__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 51);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","import * as d3 from 'd3';\n\nexport function textWrap(text, width) {\n  text.each(function () {\n    let text = d3.select(this),\n        words = text.text().split(/\\s+/).reverse(),\n        word,\n        line = [],\n        lineNumber = 0,\n        lineHeight = 1.1, // ems\n        x = text.attr(\"x\"),\n        y = text.attr(\"y\"),\n        dy = 0, //parseFloat(text.attr(\"dy\")),\n        tspan = text.text(null)\n                    .append(\"tspan\")\n                    .attr(\"x\", x)\n                    .attr(\"y\", y)\n                    .attr(\"dy\", dy + \"em\");\n    while (word = words.pop()) {\n        line.push(word);\n        tspan.text(line.join(\" \"));\n        if (tspan.node().getComputedTextLength() > width) {\n            line.pop();\n            tspan.text(line.join(\" \"));\n            line = [word];\n            tspan = text.append(\"tspan\")\n                        .attr(\"x\", x)\n                        .attr(\"y\", y)\n                        .attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\")\n                        .text(word);\n        }\n    }\n  });\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  if (typeof inputString !== 'string') {\n    return inputString;\n  }\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","import domtoimage from 'dom-to-image';\nimport { saveAs } from 'file-saver';\n\nexport default function exportImage(obj) {\n  const { node, quality, bgcolor } = obj;\n  if (quality) {\n    if (quality < 0 || quality > 1) throw Error('Please provide image quality between 0 and 1');\n    domtoimage.toBlob(node, { quality, bgcolor })\n      .then((blob) => {\n        saveAs(blob, 'chart.jpeg');\n      });\n  }\n\n  if (!quality) {\n    domtoimage.toBlob(node)\n      .then((blob) => {\n        saveAs(blob, 'chart.png');\n      });\n  }\n}\n","import downloadResults from './download-results';\n\nexport default function renderDownloadButton({\n  element,\n  label = 'Download',\n  type = 'json',\n  data\n} = {}) {\n  const btnClass = 'keen-dataviz-button';\n  const isBtnRendered = [...element.parentNode.children]\n    .find(child => child.className === btnClass);\n  if (isBtnRendered) return;\n\n  const button = document.createElement('button');\n  button.innerText = label;\n  button.className = btnClass;\n  button.addEventListener('click', event => downloadResults({ event, type, data}));\n  element.parentNode.insertBefore(button, element.nextSibling);\n};","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\nconst getColumnAverage = function (arr) {\n  return average(arr, 1);\n};\nconst getRowAverage = getColumnAverage;\n\nconst getColumnSum = function (arr) {\n  return sum(arr, 1);\n};\nconst getRowSum = getColumnSum;\n\nconst getColumnMaximum = function (arr) {\n  return maximum(arr, 1);\n};\nconst getRowMaximum = getColumnMaximum;\n\nconst getColumnMinimum = function (arr) {\n  return minimum(arr, 1);\n};\nconst getRowMinimum = getColumnMinimum;\n\nconst getColumnLabel = function (arr) {\n  return arr[0];\n};\nconst getRowIndex = getColumnLabel;\n\nexport default {\n  average,\n  maximum,\n  minimum,\n  sum,\n  getColumnAverage,\n  getRowAverage,\n  getColumnSum,\n  getRowSum,\n  getColumnMaximum,\n  getRowMaximum,\n  getColumnMinimum,\n  getRowMinimum,\n  getColumnLabel,\n  getRowIndex,\n};\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function (config = {}) {\n  if (this instanceof Dataset === false) {\n    return new Dataset(config);\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n  this.config = config;\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","const palette = {\n  colors: [\n    '#8be9fd',\n    '#50fa7b',\n    '#ffb86c',\n    '#ff79c6',\n    '#bd93f9',\n    '#ff5555',\n    '#f1fa8c',\n  ]\n};\n\nexport default palette;","const palette = {\n  colors: [\n    '#45B2E8',\n    '#D9540D',\n    '#2CAB72',\n    '#2C4BAB',\n    '#EDDD02',\n    '#E84545',\n    '#E845CE',\n    '#5FCEC9',\n    '#E89F45',\n    '#28E43F',\n    '#B765C0',\n    '#458AE8',\n    '#AB2C2C',\n    '#AB2C75',\n    '#27E5FF',\n    '#7168F2',\n    '#FF932B',\n    '#855D00',\n    '#ACE845',\n    '#1C91B4'\n  ]\n};\n\nexport default palette;","const palette = {\n  colors: [\n    '#5E77FF',\n    '#9C60FE',\n    '#F162FE',\n    '#FD65B7',\n    '#FD6768',\n    '#FDB86A',\n    '#F2FC6C',\n    '#A5FC6E',\n    '#71FB85',\n    '#73FBD0',\n    '#76DDFA',\n    '#76f4fa',\n    '#bb76fa',\n    '#fa76bf'\n  ]\n};\n\nexport default palette;","import autocollector from './autocollector';\nimport modern from './modern';\nimport dracula from './dracula';\n\nexport default {\n  autocollector,\n  modern,\n  dracula,\n};","/* eslint-env browser */\nimport c3 from 'c3';\nimport { each } from '../../utils/each';\nimport { prettyNumber } from '../../utils/pretty-number';\n\nexport default class MetricCombo {\n  render() {\n    const {\n      container,\n      metricResults,\n      title,\n      tooltip,\n    } = this.config;\n\n    const colors = ['#c3c4cc'];\n    const columns = [];\n    columns[0] = [];\n    each(this.dataset.selectColumn(0), (c, i) => {\n      let cell;\n      if (i > 0) {\n        cell = new Date(c);\n      }\n      columns[0][i] = cell;\n    });\n    columns[0][0] = 'x';\n\n    each(this.data()[0], (c, i) => {\n      if (i > 0) {\n        columns.push(this.dataset.selectColumn(i));\n      }\n    });\n\n    const prevResult = (metricResults && metricResults.previous && metricResults.previous.result)\n      || 0;\n    const currResult = (metricResults && metricResults.current && metricResults.current.result)\n      || 0;\n    const count = currResult - prevResult;\n    const percentDifference = prevResult === 0 ? '-' : prettyNumber(Math.round((count / prevResult) * 100));\n    let labelClass = 'keen-dataviz-metric-green';\n    let iconClass = 'arrow-green';\n\n    if (percentDifference < 0) {\n      labelClass = 'keen-dataviz-metric-red';\n      iconClass = 'arrow-red';\n    }\n\n    const containerTitle = (this.config.showTitle && title) ? `<div class=\"keen-dataviz-title\">${title}</div>` : '';\n    const containerElement = document.querySelector(container);\n    containerElement.innerHTML = `\n      <div class=\"keen-dataviz\">\n        <div class=\"keen-dataviz-metric-combo\">\n          <div class=\"metric-combo-data\">\n            ${containerTitle} \n            <div class=\"percent-difference ${labelClass}\"><div class=\"${iconClass}\"></div> ${percentDifference} %</div>\n            <div class=\"current-count ${labelClass}\"> ${prettyNumber(count)} </div>\n          </div>\n          <div class=\"keen-dataviz-rendering\">\n            <div class=\"c3-chart\"></div>\n          </div>\n        </div>\n      </div>`;\n    const chartRoot = containerElement.querySelector('.c3-chart');\n    const chart = c3.generate({\n      bindto: chartRoot,\n      color: {\n        pattern: colors,\n      },\n      title,\n      legend: {\n        show: false,\n      },\n      data: {\n        x: 'x',\n        columns,\n        type: 'area-spline',\n        selection: {\n          draggable: false,\n          enabled: true,\n          multiple: true,\n        },\n      },\n      point: {\n        r: 0,\n        focus: {\n          expand: {\n            r: 5,\n            enabled: true,\n          },\n        },\n        select: {\n          r: 5,\n          enabled: true,\n        },\n      },\n      axis: {\n        y: {\n          show: false,\n        },\n        x: {\n          show: false,\n        },\n      },\n      grid: {\n        x: {\n          show: false,\n        },\n        y: {\n          show: false,\n        },\n      },\n      padding: {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: -4,\n      },\n      tooltip,\n    });\n  }\n\n  update() {\n    this.destroy();\n    this.render();\n  }\n\n  destroy() {\n    const { container } = this.config;\n    const containerElement = document.querySelector(container);\n    const chartContainer = containerElement.querySelector('.c3-chart');\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\n\nexport default class HorizontalFunnel3d {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      resultValues,\n      effect3d,\n      hover,\n      minimalSize\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 100, left: 10 };\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemWidth= svgWidth/(matrix.length - 1);\n    const xMarginElement = elemWidth * 0.3;\n    const shadowCut = (xMarginElement/1.5);\n    let prevElemHeight = svgHeight;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgHeight - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2)\n          },\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = prevElemHeight * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = svgHeight * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n            },\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2)\n            }\n          ]\n        }\n    });\n\n    //funnel shadows preparing\n    const polygonsShadows = polygons.map((d, i) => {\n        return {\n          label: d.label,\n          points: [\n            {\n              x: d.points[0].x,\n              y: d.points[0].y\n            },\n            {\n              x: d.points[1].x,\n              y: d.points[1].y\n            },\n            {\n              x: effect3d === 'top'\n              ? d.points[1].x\n              : d.points[1].x - shadowCut,\n              y: effect3d === 'top'\n              ? d.points[1].y\n              : d.points[1].y - xMarginElement < svgHeight/2\n                ? svgHeight/2 + 5\n                : d.points[1].y - xMarginElement\n            },\n            {\n              x: effect3d === 'bottom'\n              ? d.points[0].x\n              : d.points[0].x - shadowCut,\n              y: effect3d === 'bottom'\n              ? d.points[0].y\n              : d.points[0].y + xMarginElement > svgHeight/2\n                ? svgHeight/2 - 5\n                : d.points[0].y + xMarginElement\n            },\n          ]\n        }\n    })\n\n    //connecting funnels with shadows for rendering\n    const polygons3d = polygons.concat(polygonsShadows);\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons3d)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(i > (polygons.length - 1)){\n            if(colorMapping[d.label]){\n              return d3.rgb(colorMapping[d.label]).darker(1.5);\n            }\n            return d3.rgb(colors[i - (polygons.length)]).darker(1.5);\n          }\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement * 0.8);\n        })\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement * 0.8);\n        })\n        .attr('y2', (d) => { return d.points[0].y + margin.top; })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', svgWidth + margin.left + (xMarginElement/4))\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', polygons[polygons.length-1].points[3].x\n                    + margin.left + (xMarginElement/4))\n        .attr('y2', polygons[polygons.length-1].points[3].y + margin.top)\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[0].x + margin.left + (elemWidth * 0.25)\n        })\n        .attr('y', svgHeight + (margin.bottom * 0.4) + margin.top)\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[0].x + margin.left + (elemWidth * 0.25)\n        })\n        .attr('y', (d) => {\n          if(d.points[2].y + (elemWidth/4) >\n          svgHeight + margin.bottom - 40){\n            return svgHeight + margin.bottom - 40 + margin.top;\n          }\n          if(d.points[2].y + (elemWidth/4) < d.points[1].y){\n            return d.points[1].y + 20 + margin.top;\n          }\n          return d.points[2].y + (elemWidth/4) + 10 + margin.top;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 16)\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2.8) + margin.left\n        })\n        .attr('y', svgHeight/2+ margin.top - 3)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\n\nexport default class HorizontalFunnel {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      marginBetweenSteps,\n      resultValues,\n      hover,\n      minimalSize\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 100, left: 10 };\n    let xMarginElement = 0;\n    if(marginBetweenSteps){\n      xMarginElement = 5;\n    }\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemWidth= svgWidth/(matrix.length - 1);\n    let prevElemHeight = svgHeight;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgHeight - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2)\n          },\n          {\n            x: elemWidth * i + xMarginElement,\n            y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = prevElemHeight * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemHeight = prevElemHeight - minimalSizeStep)\n              : prevElemHeight = svgHeight * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined'\n          || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2 + prevElemHeight)\n            },\n            {\n              x: elemWidth * (i + 1),\n              y: ((svgHeight - prevElemHeight)/2)\n            }\n          ]\n        }\n    });\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement/2);\n        })\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', (d) => {\n          return d.points[0].x + margin.left - (xMarginElement/2);\n        })\n        .attr('y2', (d) => { return d.points[0].y + margin.top; })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', svgWidth + margin.left - (xMarginElement/2))\n        .attr('y1', svgHeight + margin.bottom)\n        .attr('x2', polygons[polygons.length-1].points[3].x\n                    + margin.left + (xMarginElement/2))\n        .attr('y2', polygons[polygons.length-1].points[3].y + margin.top)\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight + (margin.bottom * 0.5) + margin.top)\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', (d) => {\n          if(d.points[2].y + ((d.points[3].y - d.points[0].y)/2)\n          + (elemWidth/4) > svgHeight + margin.bottom - 40 + margin.top){\n            return svgHeight + margin.bottom - 40 + margin.top;\n          }\n          return d.points[2].y + ((d.points[3].y - d.points[0].y)/2)\n                  + (elemWidth/4) + margin.top;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, elemWidth)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 10)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2 + margin.top + 16)\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', (d) => {\n          return d.points[1].x + (elemWidth/2) + margin.left\n        })\n        .attr('y', svgHeight/2+ margin.top - 3)\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\n\nexport default class Funnel3d {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      resultValues,\n      effect3d,\n      hover,\n      minimalSize\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 60, left: 200 };\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemHeight = svgHeight/(matrix.length - 1);\n    const yMarginElement = elemHeight * 0.3;\n    const shadowCut = (yMarginElement * 2.5);\n    let prevElemWidth = svgWidth;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgWidth - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: ((svgWidth - prevElemWidth)/2),\n            y: elemHeight * i + yMarginElement\n          },\n          {\n            x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n            y: elemHeight * i + yMarginElement\n          },\n        ]\n        if(i !== 0){\n          if(countingMethod === 'relative'){\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : prevElemWidth = prevElemWidth * d[1]/matrix[i][1];\n            percent = ((d[1]/matrix[i][1])*100).toFixed(decimals);\n          }\n          if(countingMethod === 'absolute'){\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : prevElemWidth = svgWidth * d[1]/matrix[1][1];\n            percent = ((d[1]/matrix[1][1])*100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n              y: elemHeight * (i + 1)\n            },\n            {\n              x: ((svgWidth - prevElemWidth)/2),\n              y: elemHeight * (i + 1)\n            }\n          ]\n        }\n    });\n\n    //funnel shadows preparing\n    const polygonsShadows = polygons.map((d, i) => {\n        return {\n          label: d.label,\n          points: [\n            {\n              x: d.points[3].x,\n              y: d.points[3].y\n            },\n            {\n              x: d.points[2].x,\n              y: d.points[2].y\n            },\n            {\n              x: effect3d === 'left'\n              ? d.points[2].x\n              : d.points[2].x - shadowCut < svgWidth/2\n                ? svgWidth/2 + 5\n                : d.points[2].x - shadowCut,\n              y: effect3d === 'left'\n              ? d.points[2].y\n              : d.points[2].y + (yMarginElement/1.5)\n            },\n            {\n              x: effect3d === 'right'\n              ? d.points[3].x\n              : d.points[3].x + shadowCut > svgWidth/2\n                ? svgWidth/2 - 5\n                : d.points[3].x + shadowCut,\n              y: effect3d === 'right'\n              ? d.points[3].y\n              : d.points[3].y + (yMarginElement/1.5)\n            },\n          ]\n        }\n    })\n\n    //connecting funnels with shadows for rendering\n    const polygons3d = polygons.concat(polygonsShadows);\n\n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid meet')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons3d)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(i > (polygons.length - 1)){\n            if(colorMapping[d.label]){\n              return d3.rgb(colorMapping[d.label]).darker(1.5);\n            }\n            return d3.rgb(colors[i - (polygons.length)]).darker(1.5);\n          }\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', (d) => {\n           return d.points[0].y + margin.top - (yMarginElement/5);\n         })\n        .attr('x2', (d, i) => {\n          if(i === 0){\n            return d.points[1].x + margin.left;\n          }\n          return d.points[1].x + margin.left - shadowCut;\n        })\n        .attr('y2', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/5);\n        })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', polygons[polygons.length-1].points[2].y + margin.top\n                    + yMarginElement - (yMarginElement/5))\n        .attr('x2', polygons[polygons.length-1].points[2].x\n                    + margin.left - shadowCut )\n        .attr('y2', polygons[polygons.length-1].points[2].y + margin.top\n                    + yMarginElement - (yMarginElement/5))\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'start')\n        .attr('x', 20)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 5 + (yMarginElement/4)\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'end')\n        .attr('x', (d) => {\n          return d.points[0].x + ((d.points[3].x - d.points[0].x)/2) + 130;\n        })\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 5;\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n      //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 18\n        })\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + 3\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","import * as d3 from 'd3';\nimport { textWrap } from '../../utils/svg-text-wrap';\nimport { prettyNumber } from '../../utils/pretty-number';\n\nexport default class Funnel {\n  render() {\n    const { matrix } = this.dataset;\n    const {\n      colors,\n      container,\n      labelMapping,\n      colorMapping,\n    } = this.config;\n    const opts = this.config;\n    const {\n      percents: {\n        show,\n        countingMethod,\n        decimals,\n      },\n      lines,\n      marginBetweenSteps,\n      resultValues,\n      hover,\n      minimalSize\n    } = this.config.funnel;\n    const margin = { top: 20, right: 30, bottom: 30, left: 200 };\n    let yMarginElement = 0;\n    if(marginBetweenSteps){\n      yMarginElement = 5;\n    }\n    const funnelContainer = d3.select(container);\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    const chart = chartContainer.append('svg');\n    const svgWidth = funnelContainer.style('width').slice(0, -2)\n          - margin.right - margin.left;\n    const svgHeight = funnelContainer.style('height').slice(0, -2)\n          - margin.top - margin.bottom - 30;\n    const elemHeight = svgHeight/(matrix.length - 1);\n    let prevElemWidth = svgWidth;\n    let percent = (100).toFixed(decimals);\n\n    // prepare normal funnel polygons\n    let minimalSizeStep = 0;\n    if(minimalSize){\n      minimalSizeStep = (svgWidth - minimalSize) / (matrix.length-2);\n    }\n    const polygons = matrix.slice(1).map((d, i) => {\n        const newPoints = [\n          {\n            x: ((svgWidth - prevElemWidth)/2),\n            y: elemHeight * i + yMarginElement\n          },\n          {\n            x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n            y: elemHeight * i + yMarginElement\n          },\n        ]\n        if(i !== 0){\n          if (countingMethod === \"relative\") {\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : (prevElemWidth =\n                  (prevElemWidth * d[1]) / matrix[i][1]);\n            percent = ((d[1] / matrix[i][1]) * 100).toFixed(decimals);\n          }\n          if (countingMethod === \"absolute\") {\n            minimalSize\n              ? (prevElemWidth = prevElemWidth - minimalSizeStep)\n              : (prevElemWidth = (svgWidth * d[1]) / matrix[1][1]);\n            percent = ((d[1] / matrix[1][1]) * 100).toFixed(decimals);\n          }\n        }\n        let label = d[0];\n        if(Object.keys(labelMapping).length){\n          for (let key in labelMapping) {\n            if(labelMapping[key] === d[0]) {\n              label = key;\n            }\n          }\n        }\n        let result = d[1];\n        if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n          && !isNaN(parseInt(d[1])) ) {\n            result = prettyNumber(d[1]);\n        }\n        return {\n          name: d[0],\n          label,\n          percent: percent + '%',\n          result,\n          points: [\n            ...newPoints,\n            {\n              x: ((svgWidth - prevElemWidth)/2 + prevElemWidth),\n              y: elemHeight * (i + 1)\n            },\n            {\n              x: ((svgWidth - prevElemWidth)/2),\n              y: elemHeight * (i + 1)\n            }\n          ]\n        }\n    });\n\n  \n    //chart rendering with polygons\n    chart\n      .attr('preserveAspectRatio', 'xMidYMid slice')\n      .attr('viewBox', `0 0 ${svgWidth + margin.left + margin.right} ${svgHeight + margin.top + margin.bottom - 30}`)\n      .attr('height', '100%')\n      .attr('width', '100%')\n      .append('g')\n      .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')\n      .selectAll('polygon')\n      .data(polygons)\n      .enter()\n      .append('polygon')\n        .attr('points', (d) => {\n            return d.points.map((p) => {\n              return [p.x,p.y].join(',');\n            })\n            .join(' ');\n        })\n        .style('fill', (d, i) => {\n          if(colorMapping[d.label]){\n            return colorMapping[d.label];\n          }\n          return colors[i];\n        })\n        .attr('class', (d) => { return d.label; })\n        .attr('cursor', 'pointer');\n\n    if(lines){\n      //rendering lines\n      chart\n        .selectAll('line')\n        .data(polygons)\n        .enter()\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/2);\n        })\n        .attr('x2', (d) => { return d.points[1].x + margin.left; })\n        .attr('y2', (d) => {\n          return d.points[0].y + margin.top - (yMarginElement/2);\n        })\n        .attr('class', 'chart-lines');\n\n      //rendering last line\n      chart\n        .append('line')\n        .attr('x1', 10)\n        .attr('y1', polygons[polygons.length-1].points[2].y\n                    + margin.top + (yMarginElement/2))\n        .attr('x2', polygons[polygons.length-1].points[2].x + margin.left)\n        .attr('y2', polygons[polygons.length-1].points[2].y\n                    + margin.top + (yMarginElement/2))\n        .attr('class', 'chart-lines');\n    }\n\n    //rendering labels when lines are visible\n    if(lines){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'start')\n        .attr('x', 20)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 5\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering labels when lines are not visible\n    if(!lines) {\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'end')\n        .attr('x', (d) => {\n          return d.points[0].x + ((d.points[3].x - d.points[0].x)/2)\n                  + (margin.left * 0.9);\n        })\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 5\n        })\n        .attr('class', (d) => { return 'text-label ' + d.label; })\n        .text((d) => { return d.name; })\n        .call(textWrap, margin.left)\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering percents for each step\n    if(show && !resultValues){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results for each step\n    if(resultValues && !show){\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 8\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n\n    //rendering results and percenage together\n    if(show && resultValues){\n      //rendering percents\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          if(yMarginElement === 0){\n            return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                    + margin.top + 16\n          }\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement + 12\n        })\n        .attr('class', (d) => { return 'text-second ' + d.label; })\n        .text((d) => { return d.percent; })\n        .attr('cursor', 'pointer');\n\n      //rendering results\n      chart\n        .selectAll('text.label')\n        .data(polygons)\n        .enter()\n        .append('text')\n        .style('text-anchor', 'middle')\n        .attr('x', svgWidth/2 + margin.left)\n        .attr('y', (d) => {\n          if(yMarginElement === 0){\n            return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                    + margin.top;\n          }\n          return ((d.points[2].y - d.points[1].y)/2) + d.points[1].y\n                  + margin.top + yMarginElement - 5;\n        })\n        .attr('class', (d) => { return 'text-main ' + d.label; })\n        .text((d) => { return d.result; })\n        .attr('cursor', 'pointer');\n    }\n    //hover handling\n    if(hover){\n      const polygonsHover = chart.selectAll('polygon');\n      polygonsHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      const labelHover = chart.selectAll('text');\n      labelHover\n        .on(\"mouseover\", handleMouseOver)\n        .on(\"mouseout\", handleMouseOut);\n\n      function handleMouseOver(d) {\n        polygonsHover\n          .style('opacity', 0.5);\n        labelHover\n          .style('opacity', 0.5);\n        const thisLabel = /[^ ]*$/.exec(d3.select(this).attr('class'))[0];\n        chart\n          .selectAll(`.${thisLabel}`)\n          .style('opacity', 1);\n      }\n      function handleMouseOut(d) {\n        polygonsHover\n          .style('opacity', 1);\n        labelHover\n          .style('opacity', 1);\n      }\n    }\n  }\n  update() {\n    this.destroy();\n    this.render();\n  }\n  destroy() {\n    const chartContainer = d3.select(this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'));\n    chartContainer.remove();\n  }\n}\n","export default {\n  render: function(){\n    let html = '';\n    const artifacts = this.view._artifacts.spinner = {};\n\n    // Build DOM element\n    html += '<div class=\"' + this.config.theme + '\">';\n    html +=   '<div class=\"keen-spinner-container keen-dataviz-box\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","// import moment from 'moment-timezone';\n\nimport { each } from '../../utils/each';\nimport { stripHtmlTags } from '../../utils/strip-html-tags';\nimport { escapeHtml } from '../../utils/escape-html';\n\nconst defaults = {\n  /*\n  DEPRECATED - use CSS styles\n\n  height: undefined,\n  width: undefined,\n  stickyHeader: false,\n  stickyFooter: false\n  */\n};\n\nlet currentPage;\nfunction _generateTableRows(datavizInstance, dataset) {\n  let html = '';\n  const defaultConfig = {\n    page: 1,\n    limit: 0,\n    arrows: true\n  };\n  let customConfig = {};\n  if (datavizInstance.config.table && datavizInstance.config.table.pagination) {\n    customConfig = datavizInstance.config.table.pagination;\n  }\n  const config = {\n    ...defaultConfig,\n    ...customConfig\n  };\n\n  if (!currentPage){\n    currentPage = config.page;\n  }\n\n  let datasetPaginated;\n  let pages = 0;\n  if (config.limit === 0) {\n    datasetPaginated = dataset.slice(1); // remove header\n  } else {\n    const start = config.limit * (currentPage - 1) + 1;\n    const end = start + config.limit;\n    datasetPaginated = dataset.slice(start, end);\n    pages = Math.ceil((dataset.length - 1) / config.limit);\n  }\n\n  let columnsArray = datavizInstance.config.table.columns ?\n                   datavizInstance.config.table.columns :\n                   datavizInstance.dataset.matrix[0];\n\n  const checkArray = {};\n  const { mapValues } = datavizInstance.config.table;\n  for (let key in mapValues){\n    checkArray[columnsArray.indexOf(key)] = key;\n  }\n\n  // var london     = newYork.clone().tz(\"Europe/London\");\n  for (let row of datasetPaginated) {\n    html +=   '<tr class=\"table-data-row\">';\n    for (let [index, rowCol] of row.entries()) {\n      if (\n        datavizInstance.config.timezone\n        && rowCol instanceof Date\n      ) {\n        let dateTimeTimezoned = '';\n        /*\n        moment\n          .tz(rowCol, \"UTC\")\n          .clone()\n          .tz(datavizInstance.config.timezone);\n          */\n        html += `<td>${dateTimeTimezoned.toString()}</td>`;\n        continue;\n      }\n      let rowColEscaped = escapeHtml(rowCol);\n      if(checkArray[index]){\n        html += `<td>${mapValues[checkArray[index]](rowColEscaped)}</td>`;\n        continue;\n      }\n      html += `<td>${rowColEscaped}</td>`\n    }\n    html +=   '</tr>';\n  }\n\n  if (pages > 1){\n    html += `<tr class=\"table-pagination\"><td colspan=\"999\">`;\n    let pageNumber = 1;\n    const prevPage = (currentPage === 1) ? 1 : (currentPage - 1);\n    const nextPage = (currentPage === pages) ? pages : (currentPage + 1);\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${prevPage}\"><</a>`;\n    }\n    while (pageNumber <= pages){\n      html += `<a class=\"btn ${\n        pageNumber === currentPage ? 'active' : ''\n      }\" data-page=\"${pageNumber}\">${pageNumber}</a>`;\n      pageNumber++;\n    }\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${nextPage}\">></a>`;\n    }\n    html += '</td></tr>';\n  }\n\n  return html;\n}\n\nfunction _generateTableHeader(datavizInstance, dataset) {\n  let html = '';\n  let fieldNumber = -1;\n  const tableConfig = datavizInstance.config.table;\n  const columnNames =\n    (tableConfig && tableConfig.columns)\n    || dataset[0];\n  for (let colName of columnNames) {\n    let colNameEscaped = escapeHtml(colName);\n    fieldNumber +=1;\n    html +=  `<th fieldNumber=\"${fieldNumber}\">${colNameEscaped}</th>`;\n  }\n  return html;\n}\n\n\n  const render = function() {\n    const dataset = this.dataset.matrix;\n\n    const el = this.el();\n    const theme = this.config.theme;\n    const datavizInstance = this;\n\n    let html = '';\n\n    const isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      const msg = 'No data to display';\n      const mappedMsg = this.config.errorMapping[msg] || msg;\n      if (this.config.showErrorMessages) {\n        this.message(mappedMsg);\n      }\n      return;\n    }\n\n    // Open wrapper\n    html += `<div class=\"${theme}-table\">`;\n\n    // Static, scrollable table\n    html +=   `<table class=\"${theme}-table-dataset\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    html +=       _generateTableHeader(datavizInstance, dataset);\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows(datavizInstance, dataset);\n    html +=     '</tbody>';\n    html +=   '</table>';\n/* */\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector(`.${theme}-rendering`).innerHTML = html;\n\n    el\n      .querySelectorAll(`.${theme}-rendering th`)\n      .forEach((item) => {\n        item.addEventListener('click', (event) => {\n          let sortOrder = event.target.getAttribute('order') || 'asc';\n          let fieldNumber =  event.target.getAttribute('fieldNumber');\n          let checker = function (a, b) {\n            let sortOrderNumber = (sortOrder === 'asc') ? 1 : -1;\n\n            if (typeof a[fieldNumber] === 'string') {\n              let nameA = a[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              let nameB = b[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              if (nameA < nameB) {\n                return -1 * sortOrderNumber;\n              }\n              if (nameA > nameB) {\n                return 1* sortOrderNumber;\n              }\n\n              // names must be equal\n              return 0;\n            }\n            return (a[fieldNumber] - b[fieldNumber]) * sortOrderNumber;\n          };\n\n          if (sortOrder === 'asc') {\n            sortOrder = 'desc';\n          } else {\n            sortOrder = 'asc'\n          }\n          event.target.setAttribute('order', sortOrder);\n\n          const first = this.dataset.matrix.shift();\n          this.dataset.matrix.sort(checker);\n          this.dataset.matrix.unshift(first);\n\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n          attachBtnEventListeners();\n        });\n      });\n\n\n    const attachBtnEventListeners = () => {\n      el.querySelectorAll('.btn').forEach(btn => {\n        btn.addEventListener('click', (event) => {\n          currentPage = parseInt(event.target.getAttribute('data-page'));\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n             attachBtnEventListeners();\n          }, true);\n      });\n    };\n\n    attachBtnEventListeners(datavizInstance, el, theme);\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  };\n\n\n\nconst update = function(){\n    // no special update handling\n    this.render();\n  };\n\nconst destroy=  function(){};\n\nexport default { render, update, destroy };\n","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(){\n    const color = this.config.colors[0];\n    const theme = this.config.theme;\n    const title = this.config.title;\n    const opts = this.config;\n    let value = '-';\n    let html = '';\n    let prefix = '';\n    let suffix = '';\n    let formattedNum;\n    let valueEl;\n    let flexDifferenceStyle = '';\n    let resultDifference = '';\n    let differenceStyle = '';\n    let smallerValue = '';\n    const { results, previousResults } = this.config;\n    if(results && previousResults){\n      flexDifferenceStyle = previousResults ? ' metric-comparison' : '';\n      smallerValue = previousResults && title ? '-smaller' : '';\n      resultDifference = results.result - previousResults.result;\n      differenceStyle = (resultDifference > 0) ? '-green' : '-red';\n      resultDifference = Math.abs(resultDifference);\n    }\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n        if(results && previousResults){\n          resultDifference = prettyNumber(resultDifference);\n        }\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric keen-dataviz-box' + flexDifferenceStyle + '\" title=\"' + escapeHtml(value) + '\">';\n    if (results && previousResults) {\n      html +=   '<div class=\"' + theme + '-metric' + differenceStyle + '\"><div class=\"arrow' + differenceStyle + '\"> </div>' + escapeHtml(resultDifference) + '</div>';\n    }\n    html +=     '<div class=\"' + theme + '-metric-value' + smallerValue + '\">' + prefix + escapeHtml(formattedNum) + suffix + '</div>';\n    if (title) {\n      html +=   '<div class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</div>';\n    }\n    html +=   '</div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;return b.open(\"HEAD\",a,!1),b.send(),200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","import exportImage from './export-svg';\n\nfunction generateCsvContent(data) {\n  let csvContent = 'data:text/csv;charset=utf-8,';\n\n  data.forEach((row, i) => {\n    row.forEach((cell, j) => {\n      csvContent += String(cell).replace(/,/g, '');\n      if (row.length > j + 1) {\n        csvContent += ',';\n      }\n    });\n    if (data.length > i + 1) {\n      csvContent += '\\n';\n    }\n  });\n\n  return csvContent;\n}\n\nexport default function downloadResults(obj) {\n  const { event, type, data } = obj;\n  event.preventDefault();\n  const supportedFormats = ['json', 'csv', 'jpg', 'jpeg', 'png'];\n  const format = type.toLowerCase();\n  if (!supportedFormats.includes(type)) {\n    throw new Error('This type is not supported');\n  }\n\n  const fileName = 'chart';\n  let fileFormat = '';\n  let content = '';\n\n  if (format === 'png') {\n    exportImage({\n      node: event.currentTarget.previousElementSibling,\n    });\n    return;\n  }\n\n  if (format === 'jpg' || format === 'jpeg') {\n    exportImage({\n      node: event.currentTarget.previousElementSibling,\n      quality: 1,\n      bgcolor: '#fff',\n    });\n    return;\n  }\n\n  if (format === 'json') {\n    content = `data:text/json;charset=utf-8, ${encodeURIComponent(JSON.stringify(data))}`;\n    fileFormat = format;\n  }\n\n  if (format === 'csv') {\n    content = generateCsvContent(data);\n  }\n\n  const htmlElement = document.createElement('a');\n  htmlElement.setAttribute('href', content);\n  htmlElement.setAttribute('download', `${fileName}.${fileFormat}`);\n  document.body.appendChild(htmlElement);\n  htmlElement.click();\n  document.body.removeChild(htmlElement);\n}\n","import { escapeHtml } from '../../utils/escape-html';\nimport renderDownloadButton from '../../utils/render-download-btn';\n\nexport default {\n  render: function(text){\n    const outer = document.createElement('div');\n    const inner = document.createElement('div');\n    const msg = document.createElement('span');\n\n    const titleContainer = document.createElement('div');\n    const notesContainer = document.createElement('div');\n\n    outer.className = this.config.theme + ' keen-dataviz-box';\n    inner.className = this.config.theme + '-message';\n\n    // Create title and notes for message\n    titleContainer.className = this.config.theme + '-title';\n    titleContainer.innerHTML = escapeHtml(this.config.title || '');\n    notesContainer.className = this.config.theme + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.config.notes || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n\n    if (this.config.title && this.config.showTitle) {\n      outer.appendChild(titleContainer);\n    }\n\n    outer.appendChild(inner);\n\n    if (this.config.notes) {\n      outer.appendChild(notesContainer);\n    }\n\n    if (this.config.ui\n      && this.config.ui.buttons\n      && this.config.ui.buttons.download\n      && this.config.ui.buttons.download.type) {\n        renderDownloadButton({\n          element: this.el(),\n          data: escapeHtml(text) || '',\n          type: this.config.ui.buttons.download.type,\n          label: this.config.ui.buttons.download.label,\n         })\n      }\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","export function calculateSumForPercents(matrix) {\n  const sumArray = [];\n  matrix.slice(1).forEach((d, i) => {\n    d.forEach((e) => {\n      if (typeof e === 'number') {\n        if (!sumArray[i]) {\n          sumArray[i] = e;\n          return sumArray[i];\n        }\n        sumArray[i] += e;\n      }\n      return sumArray[i];\n    });\n  });\n  return sumArray;\n}\n\nexport function calculatePercents(matrix, sumArray) {\n  const newValues = matrix.slice(1).map((d, i) => d.map((e) => {\n    if (typeof e === 'number') {\n      return (e / sumArray[i]) * 100;\n    }\n    return e;\n  }));\n  return newValues;\n}\n","export default function calculateRange(matrix) {\n  const newValues = matrix.slice(1).map(d => d.map((e, i) => {\n    if (typeof e === 'number') {\n      if (i === 1) {\n        return e - d[i + 1];\n      }\n    }\n    return e;\n  }));\n  return newValues;\n}","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  let text;\n  let title;\n  // Set config options or defaults\n  const nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  const titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  const valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (let i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (!text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    let name = nameFormat(d[i].name);\n    let value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    let bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value && !isNaN(value)) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      if (name.indexOf('__tooltip_ignore_name_field__') === -1) {\n        text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      }\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","import * as d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (options) {\n  const cols = options.data.columns;\n  const datavizInstance = this;\n  const chart = this.view._artifacts.c3;\n  let columns = [];\n  const domNode = this.el().querySelector('.' + datavizInstance.config.theme + '-rendering');\n  const legendConfig = datavizInstance.config.legend;\n\n  const pagination = this.view._artifacts.pagination = {\n    ...{\n      hidden: [],\n      labels: [],\n      offset: 0,\n      limit: Math.round((domNode.offsetHeight - 78) / 20),\n      total: 0\n    },\n    ...legendConfig.pagination\n  };\n\n  if (options.legend.sort) {\n    columns = options.legend.sort(cols);\n\n    // update column order in the data, so tooltip will be the same order\n    const columnsSorted = [];\n    const dataColumnsSorted = [];\n    if (cols[0][0] === 'x') {\n      dataColumnsSorted.push(cols[0]);\n    }\n    columns.forEach(column => {\n      let columnData = options.data.columns.find(item => item[0] === column);\n      dataColumnsSorted.push(columnData);\n    });\n    options.data.columns = dataColumnsSorted;\n  } else {\n    for (let i = 0; i < cols.length; i++) {\n      if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n        columns.push(cols[i][0]);\n      }\n    }\n  }\n\n  const legendElement = this.el().querySelector('.keen-c3-legend');\n\n  let align = 'vertical';\n  if (legendConfig.position === 'top' || legendConfig.position === 'bottom') {\n    align = 'horizontal';\n  }\n\n  const paginateHorizontalLeftElement = document.createElement('div');\n  paginateHorizontalLeftElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalLeftElement);\n  }\n\n  const legendItemsElement = document.createElement('div');\n  legendItemsElement.setAttribute('class', `keen-c3-legend-items keen-c3-legend-${align}-items`);\n  legendElement.append(legendItemsElement);\n\n  const paginateVerticalElement = document.createElement('div');\n  paginateVerticalElement.setAttribute('class', 'keen-c3-legend-pagination keen-c3-legend-pagination-icons');\n  if (align === 'vertical') {\n    legendElement.append(paginateVerticalElement);\n  }\n\n  const paginateHorizontalRightElement = document.createElement('div');\n  paginateHorizontalRightElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalRightElement);\n  }\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.offset, pagination.offset + pagination.limit);\n    pagination.total = columns.length;\n    renderLegendComponent.call(datavizInstance, pagination.labels);\n    if (pagination.total > pagination.limit) {\n      renderPaginationComponent.call(datavizInstance);\n    }\n    if (options.onPaginated){\n      options.onPaginated();\n    }\n  }\n\n  function renderLegendComponent(){\n    legendItemsElement.innerHTML = '';\n\n    pagination.labels.forEach(label => {\n      const labelShortened = legendConfig.label.textMaxLength ? label.slice(0, legendConfig.label.textMaxLength - 1) : label;\n      const legendItem = document.createElement(\"div\");\n      legendItem.innerHTML = `<span class='legend-item-text'>${labelShortened}</span>`;\n      legendItem.chartPartId = label;\n      legendItem.setAttribute('class', 'legend-item');\n      legendItemsElement.append(legendItem);\n\n      const legendItemColorSample = document.createElement(\"span\");\n      legendItemColorSample.setAttribute('class', 'legend-item-color-sample');\n      legendItemColorSample.style.backgroundColor = chart.color(legendItem.chartPartId);\n      legendItem.prepend(legendItemColorSample);\n\n      const tooltipElement = document.createElement(\"div\");\n      legendItem.addEventListener('mouseover', (event) => {\n        chart.focus(legendItem.chartPartId);\n        if (legendConfig.tooltip.show && legendItem.chartPartId.length > legendConfig.label.textMaxLength) {\n          tooltipElement.setAttribute('class', `keen-c3-legend-label-overlay keen-c3-legend-position-${legendConfig.position}`);\n          tooltipElement.innerHTML =\n            `${\n              options.legend.tooltip.pointer ? `<div class='overlay-pointer'></div>` : ``\n            }${legendItem.chartPartId}`;\n          legendItem.append(tooltipElement);\n        }\n      });\n      legendItem.addEventListener('mouseout', (event) => {\n        chart.revert();\n        tooltipElement.remove();\n      });\n      legendItem.addEventListener('click', (event) => {\n        let opacity = 1;\n        const isHidden = pagination.hidden.indexOf(legendItem.chartPartId);\n        if (isHidden < 0) {\n          pagination.hidden.push(legendItem.chartPartId);\n          opacity = .35;\n        }\n        else {\n          pagination.hidden.splice(isHidden, 1);\n          opacity = 1;\n        }\n        legendItem.style.opacity = opacity;\n        chart.toggle(legendItem.chartPartId);\n      });\n  });\n\n    if (options.onLegendRendered){\n      options.onLegendRendered();\n      options.onLegendRendered = null;\n    }\n\n  }\n\n  function renderPaginationComponent(){\n    paginateVerticalElement.innerHTML = '';\n    paginateHorizontalLeftElement.innerHTML = '';\n    paginateHorizontalRightElement.innerHTML = '';\n\n    const arrowUp = document.createElement('i');\n    const arrowDown = document.createElement('i');\n\n    const paginate = (direction) => {\n      if (direction === 'forward') {\n        const diff = pagination.offset + pagination.limit;\n        if (diff < pagination.total) {\n          pagination.offset = diff;\n          return;\n        }\n        pagination.offset = 0;\n        return;\n      }\n\n      const diff = pagination.offset - pagination.limit;\n      if (diff >= 0) {\n        pagination.offset = diff;\n        return;\n      }\n\n      pagination.offset = Math.floor(pagination.total/pagination.limit) * pagination.limit;\n    };\n\n    arrowDown.addEventListener('click', () => {\n      paginate('forward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    arrowUp.addEventListener('click', () => {\n      paginate('backward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    if (legendConfig.position === 'left' || legendConfig.position === 'right') {\n      arrowUp.setAttribute('class', 'up');\n      arrowDown.setAttribute('class', 'down');\n      paginateVerticalElement.append(arrowDown);\n      paginateVerticalElement.append(arrowUp);\n    } else {\n      // bottom top\n      arrowUp.setAttribute('class', 'left');\n      arrowDown.setAttribute('class', 'right');\n      paginateHorizontalLeftElement.append(arrowUp);\n      paginateHorizontalRightElement.append(arrowDown);\n    }\n\n  }\n\n  function clearSelectedText() {\n    let selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","export default function (startDate, endDate) {\n  const timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","import c3 from 'c3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport calculateRange from '../dataset/utils/calculate-range';\nimport { calculateSumForPercents, calculatePercents } from '../dataset/utils/calculate-percents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\nimport Funnel from './default/funnel';\nimport Funnel3d from './default/funnel-3d';\nimport HorizontalFunnel from './default/horizontal-funnel';\nimport HorizontalFunnel3d from './default/horizontal-funnel-3d';\nimport MetricCombo from './default/metric-combo';\n\nexport default function(lib) {\n  let timer;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    const delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        const c3Chart = chart.view._artifacts.c3;\n        if (c3Chart) {\n          const prevSiblingWidth = c3Chart.element.previousSibling ? c3Chart.element.previousSibling.offsetWidth : 0;\n          const nextSiblingWidth = c3Chart.element.nextSibling ? c3Chart.element.nextSibling.offsetWidth : 0;\n          const parentWidth = c3Chart.element.parentNode.parentNode.offsetWidth;\n          const width = parentWidth - prevSiblingWidth - nextSiblingWidth;\n          \n          c3Chart.resize({\n            width,\n          });\n\n        }\n      });\n    }, delay);\n  });\n\n  // FIX for c3 tooltip bug - REMOVE when https://github.com/c3js/c3/pull/2476 is merged\n  if (c3.chart && c3.chart.internal && c3.chart.internal.fn) {\n    c3.chart.internal.fn.horizontalDistance = function(data, pos) {\n      var $$ = this,\n          config = $$.config,\n          xIndex = config.axis_rotated ? 1 : 0,\n          x = $$.x(data.x);\n          return Math.abs(x - pos[xIndex]);\n    };\n    c3.chart.internal.fn.findClosest = function (values, pos) {\n      const CLASS = c3.chart.internal.fn.CLASS;\n      var $$ = this,\n          minDist = $$.config.point_sensitivity,\n          minDist = Infinity,\n          closest;\n      // find mouseovering bar\n      values.filter(function (v) {\n          return v && $$.isBarType(v.id);\n      }).forEach(function (v) {\n          var shape = $$.main.select('.' + CLASS.bars + $$.getTargetSelectorSuffix(v.id) + ' .' + CLASS.bar + '-' + v.index).node();\n          if (!closest && $$.isWithinBar($$.d3.mouse(shape), shape)) {\n              closest = v;\n          }\n      });\n      // find closest point from non-bar\n      values.filter(function (v) {\n          return v && !$$.isBarType(v.id);\n      }).forEach(function (v) {\n          var d = $$.dist(v, pos);\n          var d = $$.horizontalDistance(v, pos);\n          if (d < minDist) {\n              minDist = d;\n              closest = v;\n          }\n      });\n      return closest;\n    };\n  }\n\n  return defineC3();\n};\n\nfunction defineC3(){\n  const types = {\n    message,\n    metric,\n    table,\n    spinner,\n    'funnel': new Funnel,\n    'funnel-3d': new Funnel3d,\n    'horizontal-funnel': new HorizontalFunnel,\n    'horizontal-funnel-3d': new HorizontalFunnel3d,\n    'metric-combo': new MetricCombo,\n  };\n\n  const c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline',\n  ];\n\n  const getPaddings = (element, paddingName) => {\n    return parseInt(window.getComputedStyle(element)[`padding${paddingName}`].replace('px', ''));\n  }\n\n  function getDefaultOptions(){\n    const ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'),\n      color: {\n        pattern: this.config.colors\n      },\n      data: {\n        colors: { ...this.config.colorMapping },\n        columns: [],\n        type: this.config.type.replace('horizontal-', '')\n      },\n    };\n\n    const renderingElement = this.el();\n\n    let height = renderingElement.offsetHeight;\n\n    height -= (getPaddings(renderingElement, 'Top') + getPaddings(renderingElement, 'Bottom'));\n\n    if (this.config.showTitle) {\n      const titleElement = this.el().querySelector('.keen-dataviz-title');\n      if (titleElement) {\n        height -= titleElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.notes) {\n      const notesElement = this.el().querySelector('.keen-dataviz-notes');\n      if (notesElement) {\n        height -= notesElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    let width = this.el().querySelector('.c3-chart').offsetWidth\n      - (getPaddings(renderingElement, 'Left') + getPaddings(renderingElement, 'Right'));\n    if (width < 0) {\n      width = 0;\n    }\n\n    const DEFAULT_OPTIONS = {\n      size: {\n        width,\n        height:\n          height > 0 ?\n            height\n            : undefined,\n      }\n    };\n\n    const extendedConfig = extendDeep({}, DEFAULT_OPTIONS, this.config, ENFORCED_OPTIONS);\n\n    return extendedConfig;\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        const options = getDefaultOptions.call(this);\n\n        // 100% for charts\n        const sumArray = calculateSumForPercents(this.dataset.matrix);\n        let oldMatrix = [];\n        if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' || type === 'area-step' || type === 'area-spline')) {\n          oldMatrix = this.dataset.matrix;\n          this.dataset.matrix = [this.dataset.matrix[0], ...calculatePercents(this.dataset.matrix, sumArray)];\n          options.axis = {\n            y: {\n              padding: {\n                top: 0,\n              },\n              tick: {\n                format: d => `${d}%`,\n              },\n            },\n          };\n        }\n\n        // range charts\n        if (options.range) {\n          this.dataset.matrix = [this.dataset.matrix[0], ...calculateRange(this.dataset.matrix)];\n        }\n\n        if (!!this.config.clearOnRender && options.data.columns.length && this.dataset && this.dataset.meta) {\n          const datasetMeta = this.dataset.meta || {};\n          const { type = '' } = datasetMeta;\n          let spliceFrom = 0;\n          const intervalTypes = ['interval'];\n          if (intervalTypes.includes(type)) {\n            spliceFrom = 1;\n          }\n          options.data.columns.splice(spliceFrom);\n        }\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          const msg = 'No data to display';\n          const mappedMsg = this.config.errorMapping[msg] || msg;\n          if (this.config.showErrorMessages) {\n            this.message(mappedMsg);\n          }\n          return;\n        }\n\n        let removeLegend = false;\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.show = false;\n          options.data.columns = [[\n            this.config.title || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n          removeLegend = true;\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.config.dateFormat || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n            removeLegend = true;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n        }\n\n        if (removeLegend){\n          const legendElement = this.el().querySelector('.keen-c3-legend');\n          if (legendElement) {\n            legendElement.remove();\n            options.size.width = this.el().querySelector('.c3-chart').offsetWidth;\n          }\n          options.legend.show = false;\n        }\n\n        const chartTypesWithPartialIntervalIndicator = ['area', 'area-spline', 'area-step', 'line', 'spline', 'step'];\n\n        if (options.partialIntervalIndicator\n          && options.partialIntervalIndicator.show\n          && chartTypesWithPartialIntervalIndicator.indexOf(options.type) > -1\n        ) {\n          const results = options.data.columns && options.data.columns[0];\n          if (results && results.length > 1) {\n            const partialResultsRegion = {\n              axis: 'x',\n              start: new Date(results[results.length - 2]),\n              class: options.partialIntervalIndicator.className\n            };\n            options.regions = [...(options.regions || []), partialResultsRegion];\n          }\n        }\n        \n        if (\n          !(options.tooltip && options.tooltip.show === false)\n          &&\n          (options.legend.show === true ||\n          (options.legend\n            && options.legend.tooltip\n            && options.legend.tooltip.show)\n          )) {\n            \n          // Apply custom tooltip\n          options.tooltip = {\n            contents: c3TooltipContents,\n            format: {\n              title: this.config.tooltip.format.title,\n              value: (value, ratio, id, index) => {\n                let valueFormatted = c3CustomTooltipFiltering.call(this, value, ratio, id, index);\n                if (this.config.tooltip && this.config.tooltip.format && this.config.tooltip.format.value)\n                {\n                  valueFormatted = this.config.tooltip.format.value.call(this, valueFormatted, ratio, id, index);\n                  // Restore value from percents calculation for stacking 100% charts\n                  if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' \n                  || type === 'area-step' || type === 'area-spline')) {\n                    valueFormatted = parseFloat(((valueFormatted / 100) * sumArray[index]).toFixed(2));\n                  }\n                  // Restore value from range calculation for range charts\n                  if (options.range) {\n                    if(id === 'Max'){\n                      valueFormatted += this.dataset.matrix[index+1][2];\n                    }\n                  }\n                  return valueFormatted;\n                }\n                // Restore value from percents calculation for stacking 100% charts\n                if (options.stacking === 'percent' && (type === 'bar' || type === 'horizontal-bar' || type === 'area' \n                || type === 'area-step' || type === 'area-spline')) {\n                  valueFormatted = ((valueFormatted / 100) * sumArray[index]).toFixed(2);\n                  return parseFloat(valueFormatted);\n                }\n                // Restore value from range calculation for range charts\n                if (options.range) {\n                  if(id === 'Max'){\n                    valueFormatted += this.dataset.matrix[index+1][2];\n                  }\n                }\n                return valueFormatted;\n              }\n            }\n          };\n        }\n\n        if (options.legend.show === true) {\n            const c3options = { ...options };\n                // Apply custom color handling\n            c3options.data.color = c3CustomDataMapping.bind(this);\n\n            c3options.legend.hide = true; // hide default c3 legend\n\n            // Render artifacts\n            this.view._artifacts['c3'] = c3.generate(c3options);\n\n            c3PaginatingLegend.call(this, {...options, onLegendRendered: () => {\n              const legendElement = this.el().querySelector('.keen-c3-legend');\n              if (legendElement) {\n                if (\n                    options.legend.position === 'top' ||\n                    options.legend.position === 'bottom'\n                ) {\n                  c3options.size.height -= legendElement.offsetHeight;\n                  this.view._artifacts['c3'].resize({ height: c3options.size.height });\n                } else {\n                  if (c3options.size.width === 0) {\n                    c3options.size.width = this.el().offsetWidth\n                      - getPaddings(this.el(), 'Left')\n                      - getPaddings(this.el(), 'Right');\n                  }\n                  c3options.size.width -= legendElement.offsetWidth;\n                  this.view._artifacts['c3'].resize({ width: c3options.size.width });\n                }\n              }\n            },\n            onPaginated: () => {\n              this.view._artifacts['c3'].flush();\n            }\n          });\n        }\n        else {\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n\n  return types;\n}\n\nfunction c3CustomDataMapping(color, d) {\n  const type = this.config.type;\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (type === 'donut' || type === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  const type = this.config.type;\n\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if (typeof window === 'undefined') return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n    return parseResponse.call(this, data);\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.config.indexBy;\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n\n    if (!parser) {\n      parser = 'extraction';\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (this.config.title === undefined) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.config.title = title;\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.config.type) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.config.type = type;\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","export function valueAtDeepKey(obj, is, value) {\n  if (typeof is == 'string')\n    return valueAtDeepKey(obj, is.split('.'), value);\n  else if (is.length==1 && value!==undefined && obj !== null &&\n    typeof obj[is[0]] !== 'undefined')\n    return obj[is[0]] = value;\n  else if (is.length==0)\n    return obj;\n  else if (typeof is === 'undefined' || typeof obj === 'undefined'\n    || is === null || obj === null\n    || typeof obj[is[0]] === 'undefined')\n    return null;\n  else\n    return valueAtDeepKey(obj[is[0]], is.slice(1), value);\n}\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\nimport { valueAtDeepKey } from '../utils/object';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  let config = this.config;\n  return function(res){\n    const datasetExtraction = new Dataset()\n      .type('extraction');\n\n    // get keys of the Object, static schema\n    let names = Object.keys(flatten(res.result[0]));\n\n    const tableConfig = config && config.table;\n    if (tableConfig && tableConfig.schema === 'dynamic') {\n      const results = res.result;\n      const keys = {};\n      results.forEach(resultItem => {\n        const resultKeys = Object.keys(flatten(resultItem));\n        if (resultKeys && resultKeys.length) {\n          resultKeys.forEach(keyName => {\n            if (!keys[keyName]) {\n              keys[keyName] = true;\n            }\n          });\n        }\n      });\n      names = Object.keys(keys);\n    }\n    \n    let nameI = 0;\n    names.forEach(value => {\n      datasetExtraction.set([ value, '0' ], value);\n      nameI++;\n    });\n    \n    if (Dataset) {\n      if (config\n        && config.table\n        && config.table.columns) {\n        names = config.table.columns;\n      }\n    }\n\n    for (let i=0; i<res.result.length; i++){\n      let record = [i+1];\n      for (let iNames=0; iNames<names.length; iNames++){\n        record.push(valueAtDeepKey(res.result[i], names[iNames]));\n      }\n      datasetExtraction.matrix[String(i+1)] = record;\n    }\n\n    datasetExtraction.deleteColumn(0);\n\n    return datasetExtraction;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","import { each } from '../../utils/each';\nimport analysesUtilMethods from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","/* eslint-env browser */\nimport * as d3 from 'd3';\nimport c3 from 'c3';\n\nimport pkg from '../package.json';\nimport data from './data';\nimport { Dataset } from './dataset';\n\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\nimport { extendDeep } from './utils/extend-deep';\nimport exportImage from './utils/export-svg';\nimport renderDownloadButton from './utils/render-download-btn';\n\nimport palettes from './palettes/index';\n\n// Constructor\nexport const Dataviz = function (options = {}) {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz(options);\n  }\n\n  this.c3 = c3; // expose for use outside\n  this.d3 = d3;\n\n  const datavizInstance = this;\n  const defaultOptions = {\n    showDeprecationWarnings: true,\n    showLoadingSpinner: false,\n\n    container: undefined, // querySelector of container, for example '#someDiv'\n    containerElement: undefined, // HTML parent element for the chart\n\n    // width: undefined, *deprecated* - use CSS\n    // height: undefined, *deprecated* - use CSS\n\n    title: undefined,\n    showTitle: true,\n\n    notes: undefined,\n    theme: 'keen-dataviz',\n\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n\n    colorMapping: {},\n    ui: {},\n\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    labelMappingRegExp: undefined,\n    errorMapping: {},\n    showErrorMessages: true,\n    library: 'default',\n    sortGroups: undefined,\n    sortIntervals: undefined,\n\n    results: undefined, // raw data\n\n    // C3 chartOptions\n    type: undefined,\n    stacked: false,\n    dateFormat: undefined,\n    legend: {\n      show: true,\n      position: 'right',\n      label: {\n        textMaxLength: 12\n      },\n      pagination: {\n        offset: 0, // start from\n        limit: 5 // items per page\n      },\n      tooltip: {\n        show: true,\n        pointer: true\n      },\n      sort: undefined\n    },\n\n    axis: {},\n    color: {},\n    data: {\n      order: null\n    },\n    size: {\n      // control it with CSS of .c3-chart\n    },\n    padding: {\n      top: 15\n    },\n    point: {\n      focus: {\n        expand: {\n          enabled: false\n        }\n      },\n      r: 2,\n      show: true\n    },\n    tooltip: {\n      format: {\n        // https://c3js.org/samples/tooltip_format.html\n      }\n    },\n    transition: {\n      // duration: 0\n    },\n    data: {\n      selection: {\n       enabled: true,\n       draggable: true,\n       multiple: true\n     }\n   },\n   grid: {\n     y: {\n       show: true\n     }\n   },\n   partialIntervalIndicator: {\n     show: undefined,\n     className: 'partial-interval-indicator'\n   },\n   timezone: 'UTC',\n   table: {\n     schema: 'static',\n   },\n   renderOnVisible: false,\n   funnel: {\n     lines: true,\n     resultValues: true,\n     percents: {\n       show: false,\n       countingMethod: 'absolute',\n       decimals: 0\n     },\n     marginBetweenElements: false,\n     hover: true,\n     effect3d: 'both-sides',\n     minimalSize: false,\n   },\n   react: false,\n   range: false,\n   sparkline: false,\n  };\n\n  this.config = { ...extendDeep(defaultOptions, options) };\n\n  if (options.palette) {\n    if (!palettes[options.palette]){\n      console.log('Colors pallete not found', options.palette);\n    }\n    this.config.colors = palettes[options.palette].colors;\n  }\n\n  if (this.config.type) {\n    // backward compatibility with v2016... areachart -> area\n    this.config.type = convertChartTypes(this.config.type);\n  }\n\n  // overwriting options for range chart\n  if(this.config.type && this.config.type.includes('-range')) {\n    this.config.range = true;\n    this.config.type = this.config.type.replace('-range', '');\n    this.config.legend.show = false;\n    this.config.stacking = 'normal';\n    this.config.labels = ['Max', 'Min'];\n    this.config.colors = [\n      this.config.colors[0],\n      this.config.colors[0],\n    ];\n  }\n\n  // overwriting stacked when stacking added\n  if (this.config.stacking) {\n    this.config.stacked = true;\n  }\n\n  // overwriting options for sparkline chart\n  if (this.config.sparkline) {\n    this.config.legend.show = false;\n    this.config.axis = {\n      x: {\n        show: false,\n      },\n      y: {\n        show: false,\n      },\n    };\n    this.config.grid = {\n      x: {\n        show: false,\n      },\n      y: {\n        show: false,\n      },\n    };\n  }\n\n  // get DOM node by query\n  if (this.config.container) {\n    this.el(this.config.container);\n  }\n\n  if (options.legend !== undefined && !options.legend) {\n    this.config.legend = {\n      ...options,\n      show: false\n    };\n  }\n\n  if (options.color && options.color.pattern) {\n    // to match c3 options\n    this.config.colors = options.color.pattern;\n  }\n\n  if (this.config.legend\n      && this.config.legend.tooltip\n      && this.config.legend.tooltip.show === false\n      && this.config.tooltip.show === undefined) {\n    this.config.tooltip = { show: false };\n  }\n\n  this.dataset = new Dataset(this.config);\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ }\n  };\n\n  Dataviz.visuals.push(this);\n\n  if (this.config.showLoadingSpinner) {\n    this.prepare();\n  }\n\n  if (!!this.config.results) {\n    this.render(this.config.results);\n  }\n  this.config.firstVisibilityState = document.visibilityState;\n};\n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n  if (!arguments.length) return Dataviz.visuals;\n  const el = target.nodeName ? target : document.querySelector(target);\n  let match = null;\n  each(Dataviz.visuals, function(visual){\n    if (el == visual.config.container){\n      match = visual;\n      return false;\n    }\n  });\n  return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  const view = this.config;\n  each(obj, function(prop, key){\n    // Handle deprecated property names\n    if (key === 'chartType') {\n      key = 'type';\n    }\n    view[key] = prop;\n  });\n  return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  this.config = extendDeep(this.config, obj);\n  return this;\n};\n\nDataviz.prototype.colors = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.colors;\n  this.config.colors = (arr instanceof Array ? arr : []);\n  return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })');\n  }\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.colorMapping;\n  if (obj === null) {\n    this.config.colorMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      datavizInstance.config.colorMapping[key] = (value ? value : null);\n    });\n  }\n  return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.dateFormat;\n  if (typeof val === 'string' || typeof val === 'function') {\n    this.config.dateFormat = val;\n  }\n  else {\n    this.config.dateFormat = undefined;\n  }\n  return this;\n};\n\nDataviz.prototype.destroy = function(){\n  const library = this.library();\n  const type = this.config.type;\n  const element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n  if (element) {\n    element.innerHTML = '';\n  }\n  this.view._prepared = false;\n  this.view._rendered = false;\n  this.view._artifacts = {};\n  return this;\n};\n\nDataviz.prototype.el = function(target){\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.containerElement;\n  domReady(function(){\n    if (target && target !== null) {\n      if (target.nodeName) {\n        datavizInstance.config.containerElement = target;\n      }\n      else if (document.querySelector) {\n        datavizInstance.config.containerElement = document.querySelector(target);\n      }\n    }\n    else {\n      datavizInstance.config.containerElement = undefined;\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.height = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.height() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.indexBy;\n  this.config.indexBy = (str ? String(str) : 'timeframe.start');\n  return this;\n};\n\nDataviz.prototype.labels = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })');\n  }\n\n  if (!arguments.length) return this.config.labels;\n  this.config.labels = (arr instanceof Array ? arr : []);\n\n  setLabels(this);\n\n  return this;\n};\n\nfunction setLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value, index){\n      if (datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value, index){\n      if (index > 0 && datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.labelMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.labelMapping;\n  if (obj === null) {\n    this.config.labelMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config.labelMapping[key] = (value ? value : null);\n    }.bind(this));\n  }\n\n  mapLabels(this);\n\n  return this;\n};\n\nfunction mapLabelsExec({ datavizInstance, value }){\n  if (datavizInstance.config.labelMappingRegExp){\n    let valueAfterMatching = value;\n    datavizInstance.config.labelMappingRegExp.forEach(regExpAndLabel => {\n      if (regExpAndLabel.length > 1) {\n        let regExpObj = regExpAndLabel[0];\n        if (regExpObj.test(value)){\n          valueAfterMatching = regExpAndLabel[1];\n        }\n      }\n    });\n    return stripHtmlTags(valueAfterMatching);\n  }\n  if (datavizInstance.config.labelMapping[value]) {\n    return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n  }\n  return stripHtmlTags(value);\n}\n\nfunction mapLabels(datavizInstance){\n  // Write labels\n  if (!datavizInstance.config.labelMappingDimension) {\n    // if not defined use deprecated auto-detecting\n    if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.config.labelMappingDimension = 'row';\n    } else {\n      datavizInstance.config.labelMappingDimension = 'column';\n    }\n  }\n\n  if (datavizInstance.config.labelMappingDimension === 'row'\n    || datavizInstance.config.labelMappingDimension === 'both') {\n    datavizInstance.dataset.updateColumn(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n\n  if (datavizInstance.config.labelMappingDimension === 'column'\n    || datavizInstance.config.labelMappingDimension === 'both') {\n    datavizInstance.dataset.updateRow(0, function(value){\n      return mapLabelsExec({ datavizInstance, value });\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.config['library'];\n    this.config['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      const message = Dataviz.libraries.default.message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.notes;\n  this.config.notes = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.prepare = function(){\n    const datavizInstance = this;\n\n    if (!this.el()) {\n      throw `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n      return;\n    }\n\n    domReady(function(){\n      if (datavizInstance.view._rendered) {\n        datavizInstance.destroy();\n      }\n      if (datavizInstance.el()) {\n        datavizInstance.el().innerHTML = '';\n        const loader = Dataviz.libraries.default.spinner;\n        if (loader.render) {\n          loader.render.call(datavizInstance);\n        }\n        datavizInstance.view._prepared = true;\n      }\n    });\n\n    return this;\n};\n\nDataviz.prototype.render = function(results = undefined){\n  const datavizInstance = this;\n\n  if (!!results) {\n    const firstResult = results[0] || results;\n    if (\n      firstResult.query\n      && firstResult.query.interval\n      && firstResult.query.timeframe\n      && typeof firstResult.query.timeframe === 'string'\n      && firstResult.query.timeframe.includes('this_')\n      && this.config.partialIntervalIndicator\n      && this.config.partialIntervalIndicator.show === undefined\n    )\n    {\n      this.config.partialIntervalIndicator.show = true;\n    }\n\n    if (Array.isArray(results)) {\n      const timeframes = results.map(resultItem => resultItem.query.timeframe);\n      timeframes.forEach(resultTimeframe => {\n        let foundDifferent = timeframes.find(timeframeItem =>\n          JSON.stringify(timeframeItem) !== JSON.stringify(resultTimeframe)\n        );\n        if (foundDifferent){\n          const msg = 'Timeframes of the queries should be the same';\n          console.error(msg);\n          throw msg;\n        }\n      });\n      // first result is important to prepare X on the chart\n      return datavizInstance\n        .data(results[0])\n        .call(() => {\n          const getLabel = (input) => {\n            return `${input.query.event_collection} ${input.query.analysis_type}`;\n          }\n          let label = getLabel(results[0]);\n          if (datavizInstance.config.labelMapping[label]) {\n            label = datavizInstance.config.labelMapping[label];\n          }\n          this.dataset.deleteColumn(1);\n          for (let result of results) {\n            label = getLabel(result);\n            let ds2 = Dataset.parser('interval')(result);\n            datavizInstance.dataset.appendColumn(label, ds2.selectColumn(1).slice(1));\n          }\n        })\n        .render();\n    }\n\n    return datavizInstance.data(results).render();\n  }\n  if (\n    (!!this.config.labelMapping && Object.keys(this.config.labelMapping).length > 0)\n    ||\n    (!!this.config.labelMappingRegExp && this.config.labelMappingRegExp.length > 0)\n  ){\n    mapLabels(datavizInstance);\n  }\n  if (!!this.config.labels && Object.keys(this.config.labels).length > 0){\n    setLabels(datavizInstance);\n  }\n  if (!!this.config.sortGroups) {\n    sortGroups(datavizInstance);\n  }\n  if (!!this.config.sortIntervals) {\n    sortIntervals(datavizInstance);\n  }\n\n  const loader = Dataviz.libraries.default.spinner;\n  const library = this.config.library;\n  const type = this.config.type;\n  const containerElement = this.el();\n\n  if (!containerElement || containerElement === undefined) {\n    const msg = `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n    console.error(msg);\n    throw msg;\n    return;\n  }\n\n  let returnValue = datavizInstance;\n\n  if (datavizInstance.config.renderAsPromise) {\n    returnValue = new Promise((resolve, reject) => {\n      const customCallback = this.config.onrendered;\n      datavizInstance.config.onrendered = () => {\n        if (customCallback) {\n          customCallback();\n        }\n        resolve(datavizInstance);\n      }\n    });\n  }\n\n  domReady(function(){\n    const shouldRenderDownloadBtn = datavizInstance.config.ui\n      && datavizInstance.config.ui.buttons\n      && datavizInstance.config.ui.buttons.download\n      && datavizInstance.config.ui.buttons.download.type;\n    if (datavizInstance.view._prepared && loader.destroy) {\n      loader.destroy.apply(datavizInstance, arguments);\n    }\n    containerElement.innerHTML = '';\n\n    if (Dataviz.libraries[library] === 'undefined'){\n      // Error: Unregistered library\n      const msg = `Incorrect library`;\n      datavizInstance.message(msg);\n      throw msg;\n      return;\n    }\n    else {\n      if (typeof Dataviz.libraries[library][type] === 'undefined') {\n        const msg = `Incorrect chart type`;\n        const mappedMsg = this.config.errorMapping[msg] || msg;\n        datavizInstance.message(mappedMsg);\n        throw msg;\n        return;\n      }\n      else {\n        buildDomWrapper(containerElement,\n          datavizInstance.config\n        );\n        if (shouldRenderDownloadBtn) {\n          renderDownloadButton({\n            element: containerElement,\n            data: datavizInstance.dataset.matrix,\n            type: datavizInstance.config.ui.buttons.download.type,\n            label: datavizInstance.config.ui.buttons.download.label,\n           })\n        }\n        const { renderOnVisible } = datavizInstance.config;\n        if(renderOnVisible){\n          if(typeof IntersectionObserver !== 'undefined'){\n            const chartVisibleCallback = (events, observer) => {\n              events.forEach(el => {\n                if(el.isIntersecting){\n                  if(!datavizInstance.view._rendered){\n                    Dataviz.libraries[library][type].render.call(datavizInstance);\n                    datavizInstance.view._rendered = true;\n                  }\n                }\n              })\n            }\n            const observer = new IntersectionObserver(chartVisibleCallback);\n            observer.observe(containerElement);\n            return;\n          }\n        }\n        if(datavizInstance.config.firstVisibilityState === 'hidden'){\n          if(typeof document !== 'undefined') {\n            let hidden, visibilityChange;\n            if (typeof document.hidden !== \"undefined\") {\n              hidden = \"hidden\";\n              visibilityChange = \"visibilitychange\";\n            } else if (typeof document.msHidden !== \"undefined\") {\n              hidden = \"msHidden\";\n              visibilityChange = \"msvisibilitychange\";\n            } else if (typeof document.webkitHidden !== \"undefined\") {\n              hidden = \"webkitHidden\";\n              visibilityChange = \"webkitvisibilitychange\";\n            }\n            const handleVisibilityChange = () => {\n              if(!document[hidden]) {\n                datavizInstance.view._artifacts.c3.load(datavizInstance.dataset.matrix);\n              }\n            }\n            if(typeof document.addEventListener !== \"undefined\" ||\n               hidden !== undefined){\n              document.addEventListener(visibilityChange, handleVisibilityChange, {\n                once: true\n              });\n            }\n          }\n        }\n        Dataviz.libraries[library][type].render.call(datavizInstance);\n        datavizInstance.view._rendered = true;\n      }\n    }\n  });\n\n  return returnValue;\n};\n\nDataviz.prototype.sortGroups = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortGroups;\n  this.config.sortGroups = (str ? String(str) : null);\n\n  sortGroups(this, str);\n\n  return this;\n};\n\nfunction sortGroups(datavizInstance){\n  // Sort groups\n  if (datavizInstance.config.sortGroups && datavizInstance.data().length > 1) {\n    if (isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.dataset.sortColumns(datavizInstance.config.sortGroups, datavizInstance.dataset.getColumnSum);\n    }\n    else {\n      datavizInstance.dataset.sortRows(datavizInstance.config.sortGroups, datavizInstance.dataset.getRowSum);\n    }\n  }\n}\n\nDataviz.prototype.sortIntervals = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortIntervals;\n  this.config.sortIntervals = (str ? String(str) : null);\n\n  sortIntervals(this);\n\n  return this;\n};\n\nfunction sortIntervals(datavizInstance){\n  if (datavizInstance.config.sortIntervals) {\n    datavizInstance.dataset.sortRows(datavizInstance.config.sortIntervals);\n  }\n}\n\nDataviz.prototype.stacked = function(bool){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.stacked;\n  this.config.stacked = bool ? true : false;\n  return this;\n};\n\nDataviz.prototype.theme = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.theme;\n  this.config.theme = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.title = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.title;\n  this.config.title = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.type = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.type;\n  this.config.type = (str ? convertChartTypes(str) : null);\n  return this;\n};\n\nDataviz.prototype.update = function(){\n  const library = this.config.library;\n  const type = this.config.type;\n  const element = this.el();\n  if (library && type && element && Dataviz.libraries[library][type].update) {\n    Dataviz.libraries[library][type].update.apply(this, arguments);\n  }\n  return this;\n};\n\nDataviz.prototype.width = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.width() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\nDataviz.prototype.exportImage = function({ quality = 0, bgcolor = '#fff' } = {}) {\n  exportImage({\n    node: this.config.containerElement,\n    quality,\n    bgcolor,\n  });\n};\n\n// Deprecations\nDataviz.prototype.chartType = Dataviz.prototype.type;\nDataviz.prototype.error = Dataviz.prototype.message;\nDataviz.prototype.parseRawData = Dataviz.prototype.data;\nDataviz.prototype.parseRequest = function(){\n  // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n  return this;\n};\nDataviz.prototype.initialize = function(){\n  // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n  return this;\n};\n\nDataviz.version = pkg.version;\n\n// Private\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  let chart100percentWide = '';\n  let rangeChart = '';\n  if (options.legend.position === 'top' || options.legend.position === 'bottom') {\n    chart100percentWide = 'c3-chart-100-percent';\n  }\n  if (options.range) {\n    rangeChart = 'keen-dataviz-range';\n  }\n  let container = `<div class=\"c3-chart ${chart100percentWide} ${rangeChart}\"></div>`;\n  let align = 'horizontal';\n  if (options.legend.position === 'left' || options.legend.position === 'right') {\n    align = 'vertical';\n  }\n  if (options.legend && options.legend.show) {\n    if (options.legend.position === 'top' || options.legend.position === 'left') {\n      container = `<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>${container}`;\n    } else {\n      container = `${container}<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>`;\n    }\n  }\n  if(!options.react){\n    html += `<div class=\"${options.theme}\">`;\n  }\n  if (options.title && options.showTitle) {\n    html += `<div class=\"keen-dataviz-title ${options.theme}-title\">${options.title}</div>`;\n  }\n  html += `<div class=\"keen-dataviz-rendering keen-dataviz-rendering-${align} ${options.theme}-rendering ${options.theme}-rendering-${align}\">${container}</div>`;\n  if (options.notes) {\n    html += `<div class=\"keen-dataviz-notes ${options.theme}-notes\">${options.notes}</div>`;\n  }\n  if(!options.react){\n    html += '</div>';\n  }\n\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(() => {\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n","import { Dataviz, Dataset } from './index';\n\nconst env = typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {};\n\nexport const extendKeenGlobalObject = function(env) {\n  env.KeenDataviz = Dataviz;\n  env.KeenDataset = Dataset;\n\n  // just for backward compatibility\n  env.Keen = env.Keen || {};\n  env.Keen.Dataset = Dataset;\n  env.Keen.Dataviz = Dataviz;\n};\n\nif (typeof KEEN_GLOBAL_OBJECT !== 'undefined'\n  && KEEN_GLOBAL_OBJECT) {\n  extendKeenGlobalObject(env);\n}\n\nexport let keenGlobals = undefined;\nif (typeof webpackKeenGlobals !== 'undefined') {\n  keenGlobals = webpackKeenGlobals;\n}\n\nexport { Dataviz, Dataset } from './index';\nexport default Dataviz;\n"],"sourceRoot":""}